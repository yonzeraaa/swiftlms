"use strict";exports.id=3386,exports.ids=[3386],exports.modules={2943:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},8819:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10022:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},18179:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},18599:(a,b,c)=>{c.d(b,{A:()=>z});var d=c(60687),e=c(43210),f=c(47828),g=c(81381),h=c(82080),i=c(84027),j=c(11860),k=c(79300),l=c(27351),m=c(2943),n=c(78272),o=c(14952),p=c(8819),q=c(46114),r=c(9171),s=c(57601),t=c(51358),u=c(62478),v=c(93613);function w({item:a,renderItem:b,canEdit:c=!0}){let{attributes:e,listeners:f,setNodeRef:h,transform:i,transition:j,isDragging:k}=(0,t.gl)({id:a.id,disabled:!c}),l={transform:u.Ks.Transform.toString(i),transition:j,opacity:k?.5:1};return(0,d.jsxs)("div",{ref:h,style:l,className:`flex items-center gap-3 p-3 bg-navy-800/50 rounded-lg border ${k?"border-gold-500 shadow-lg":"border-navy-600"} ${c?"hover:border-gold-500/50":""} transition-all`,children:[c&&(0,d.jsx)("div",{...e,...f,className:"cursor-grab hover:cursor-grabbing text-gold-400/50 hover:text-gold-400",children:(0,d.jsx)(g.A,{className:"w-5 h-5"})}),(0,d.jsx)("div",{className:"flex-1",children:b?b(a):(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-gold-200",children:a.name}),a.description&&(0,d.jsx)("div",{className:"text-sm text-gold-400/70 mt-1",children:a.description})]})})]})}function x({items:a,onReorder:b,title:c,renderItem:f,canEdit:g=!0}){let[h,i]=(0,e.useState)(a),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(!1),[o,u]=(0,e.useState)(null),x=(0,s.FR)((0,s.MS)(s.AN,{activationConstraint:{distance:8}}),(0,s.MS)(s.uN,{coordinateGetter:t.JR})),y=async()=>{try{n(!0),u(null),await b(h),l(!1)}catch(a){console.error("Erro ao salvar ordem:",a),u(a.message||"Erro ao salvar a nova ordem")}finally{n(!1)}};return g?(0,d.jsxs)("div",{className:"space-y-4",children:[c&&(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gold",children:c}),k&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{variant:"secondary",size:"sm",onClick:()=>{i(a),l(!1),u(null)},disabled:m,icon:(0,d.jsx)(j.A,{className:"w-4 h-4"}),children:"Cancelar"}),(0,d.jsx)(r.A,{variant:"primary",size:"sm",onClick:y,disabled:m,icon:(0,d.jsx)(p.A,{className:"w-4 h-4"}),children:m?"Salvando...":"Salvar Ordem"})]})]}),o&&(0,d.jsx)(q.Ay,{className:"bg-red-500/10 border-red-500/30",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-red-400",children:[(0,d.jsx)(v.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:o})]})}),(0,d.jsx)(s.Mp,{sensors:x,collisionDetection:s.fp,onDragEnd:a=>{let{active:b,over:c}=a;c&&b.id!==c.id&&i(a=>{let d=a.findIndex(a=>a.id===b.id),e=a.findIndex(a=>a.id===c.id),f=(0,t.be)(a,d,e);return l(!0),u(null),f})},children:(0,d.jsx)(t.gB,{items:h.map(a=>a.id),strategy:t._G,children:(0,d.jsx)("div",{className:"space-y-2",children:h.map(a=>(0,d.jsx)(w,{item:a,renderItem:f,canEdit:g},a.id))})})}),0===h.length&&(0,d.jsx)(q.Ay,{className:"text-center py-8",children:(0,d.jsx)("p",{className:"text-gold-300/70",children:"Nenhum item para ordenar"})})]}):(0,d.jsxs)("div",{className:"space-y-3",children:[c&&(0,d.jsx)("h3",{className:"text-lg font-semibold text-gold mb-2",children:c}),h.map(a=>(0,d.jsx)(w,{item:a,renderItem:f,canEdit:!1},a.id))]})}function y({subject:a,index:b}){let{attributes:c,listeners:e,setNodeRef:f,transform:h,transition:i,isDragging:j}=(0,t.gl)({id:a.id}),k={transform:u.Ks.Transform.toString(h),transition:i,opacity:j?.5:1};return(0,d.jsxs)("div",{ref:f,style:k,className:`flex items-center gap-2 p-2 bg-navy-800/30 rounded-lg ${j?"ring-2 ring-gold-500/50":""} transition-all`,children:[(0,d.jsx)("div",{...c,...e,className:"cursor-grab hover:cursor-grabbing text-gold-400/50 hover:text-gold-400",children:(0,d.jsx)(g.A,{className:"w-4 h-4"})}),(0,d.jsxs)("span",{className:"text-xs text-gold-400/50 w-6",children:[b+1,"."]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("span",{className:"text-sm text-gold-200",children:a.subjects?.name}),a.subjects?.code&&(0,d.jsxs)("span",{className:"text-xs text-gold-400/70 ml-2",children:["(",a.subjects.code,")"]})]})]})}function z({courseId:a,courseName:b,canManage:c=!1}){let[g,u]=(0,e.useState)([]),[v,w]=(0,e.useState)(null),[z,A]=(0,e.useState)({}),[B,C]=(0,e.useState)({}),[D,E]=(0,e.useState)(!0),[F,G]=(0,e.useState)(new Set),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(null),[L,M]=(0,e.useState)(null),[N,O]=(0,e.useState)({}),[P,Q]=(0,e.useState)({}),R=(0,f.U)(),S=(0,s.FR)((0,s.MS)(s.AN,{activationConstraint:{distance:8}}),(0,s.MS)(s.uN,{coordinateGetter:t.JR}));async function T(){try{E(!0);let{data:b,error:c}=await R.from("course_modules").select("*").eq("course_id",a).order("order_index");if(c)throw c;u(b||[]);let d={},e={};for(let a of b||[]){let{data:b}=await R.from("module_subjects").select("*, subjects(*)").eq("module_id",a.id).order("order_index");d[a.id]=b||[];let{data:c}=await R.from("lessons").select("*").eq("module_id",a.id).order("order_index");e[a.id]=c||[]}A(d),C(e)}catch(a){console.error("Erro ao carregar estrutura do curso:",a)}finally{E(!1)}}async function U(b){try{let c=b.map(a=>a.id),{error:d}=await R.rpc("reorder_course_modules",{p_course_id:a,p_module_ids:c});if(d)throw d;u(b)}catch(a){throw console.error("Erro ao reordenar m\xf3dulos:",a),Error("Erro ao salvar nova ordem dos m\xf3dulos")}}async function V(a,b){try{let c=b.map(a=>a.subject_id||a.id),{error:d}=await R.rpc("reorder_module_subjects",{p_module_id:a,p_subject_ids:c});if(d)throw d;A(c=>({...c,[a]:b}))}catch(a){throw console.error("Erro ao reordenar disciplinas:",a),Error("Erro ao salvar nova ordem das disciplinas")}}async function W(a,b){try{let c=b.map(a=>a.id),{error:d}=await R.rpc("reorder_lessons",{p_module_id:a,p_lesson_ids:c});if(d)throw d;C(c=>({...c,[a]:b}))}catch(a){throw console.error("Erro ao reordenar aulas:",a),Error("Erro ao salvar nova ordem das aulas")}}return D?(0,d.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold-500"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(h.A,{className:"w-6 h-6 text-gold-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gold",children:b}),(0,d.jsx)("p",{className:"text-sm text-gold-400/70",children:"Estrutura Hier\xe1rquica do Curso"})]})]}),c&&null===H&&(0,d.jsx)(r.A,{variant:"secondary",size:"sm",onClick:()=>I("modules"),icon:(0,d.jsx)(i.A,{className:"w-4 h-4"}),children:"Gerenciar Estrutura"}),H&&(0,d.jsx)(r.A,{variant:"ghost",size:"sm",onClick:()=>{I(null),K(null)},icon:(0,d.jsx)(j.A,{className:"w-4 h-4"}),children:"Fechar Edi\xe7\xe3o"})]}),"modules"===H&&(0,d.jsx)(q.Ay,{className:"bg-navy-800/50 border-gold-500/30",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gold mb-4",children:[(0,d.jsx)(k.A,{className:"w-5 h-5"}),(0,d.jsx)("h3",{className:"font-semibold",children:"Reordenar M\xf3dulos do Curso"})]}),(0,d.jsx)(x,{items:g.map(a=>({id:a.id,name:a.title,description:a.description||void 0})),onReorder:U,canEdit:c})]})}),"subjects"===H&&J&&(0,d.jsx)(q.Ay,{className:"bg-navy-800/50 border-gold-500/30",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gold mb-4",children:[(0,d.jsx)(l.A,{className:"w-5 h-5"}),(0,d.jsxs)("h3",{className:"font-semibold",children:["Reordenar Disciplinas - ",g.find(a=>a.id===J)?.title]})]}),(0,d.jsx)(x,{items:(z[J]||[]).map(a=>({id:a.id,subject_id:a.subject_id,name:a.subjects?.name||"Disciplina sem nome",description:a.subjects?.code||void 0})),onReorder:a=>V(J,a),canEdit:c})]})}),"lessons"===H&&J&&(0,d.jsx)(q.Ay,{className:"bg-navy-800/50 border-gold-500/30",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-gold mb-4",children:[(0,d.jsx)(m.A,{className:"w-5 h-5"}),(0,d.jsxs)("h3",{className:"font-semibold",children:["Reordenar Aulas - ",g.find(a=>a.id===J)?.title]})]}),(0,d.jsx)(x,{items:(B[J]||[]).map(a=>({id:a.id,name:a.title,description:a.description||void 0})),onReorder:a=>W(J,a),canEdit:c})]})}),(0,d.jsx)("div",{className:"space-y-3",children:g.map((a,b)=>{let e=F.has(a.id),f=z[a.id]||[],g=B[a.id]||[];return(0,d.jsxs)(q.Ay,{className:"overflow-hidden",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-navy-800/30 -m-4 p-4 transition-colors",onClick:()=>{var b;return b=a.id,void G(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},children:[(0,d.jsx)("button",{className:"text-gold-400 hover:text-gold-300 transition-colors",children:e?(0,d.jsx)(n.A,{className:"w-5 h-5"}):(0,d.jsx)(o.A,{className:"w-5 h-5"})}),(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,d.jsx)(k.A,{className:"w-5 h-5 text-gold-500"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("h3",{className:"font-semibold text-gold",children:["M\xf3dulo ",b+1,": ",a.title]}),a.description&&(0,d.jsx)("p",{className:"text-sm text-gold-400/70",children:a.description})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gold-400",children:[(0,d.jsxs)("span",{children:[f.length," disciplinas"]}),(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:[g.length," aulas"]})]})]}),c&&null===H&&(0,d.jsx)("div",{className:"flex items-center gap-2",onClick:a=>a.stopPropagation(),children:(0,d.jsx)(r.A,{variant:"ghost",size:"sm",onClick:()=>{I("lessons"),K(a.id)},icon:(0,d.jsx)(m.A,{className:"w-4 h-4"}),children:"Ordenar Aulas"})})]}),e&&(0,d.jsxs)("div",{className:"mt-4 pt-4 border-t border-navy-700 space-y-4",children:[f.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsxs)("h4",{className:"text-sm font-medium text-gold-300 flex items-center gap-2",children:[(0,d.jsx)(l.A,{className:"w-4 h-4"}),"Disciplinas"]}),c&&N[a.id]&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(r.A,{variant:"ghost",size:"sm",onClick:()=>{T(),O(b=>({...b,[a.id]:!1}))},disabled:P[a.id],children:[(0,d.jsx)(j.A,{className:"w-3 h-3"}),"Cancelar"]}),(0,d.jsxs)(r.A,{variant:"primary",size:"sm",onClick:async()=>{Q(b=>({...b,[a.id]:!0}));try{await V(a.id,f),O(b=>({...b,[a.id]:!1}))}catch(a){console.error("Erro ao salvar:",a)}finally{Q(b=>({...b,[a.id]:!1}))}},disabled:P[a.id],children:[(0,d.jsx)(p.A,{className:"w-3 h-3"}),P[a.id]?"Salvando...":"Salvar"]})]})]}),(0,d.jsx)("div",{className:"grid gap-2 ml-6",children:c?(0,d.jsx)(s.Mp,{sensors:S,collisionDetection:s.fp,onDragEnd:b=>{let{active:c,over:d}=b;if(d&&c.id!==d.id){let b=f.findIndex(a=>a.id===c.id),e=f.findIndex(a=>a.id===d.id),g=(0,t.be)(f,b,e);A(b=>({...b,[a.id]:g})),O(b=>({...b,[a.id]:!0}))}},children:(0,d.jsx)(t.gB,{items:f.map(a=>a.id),strategy:t._G,children:f.map((a,b)=>(0,d.jsx)(y,{subject:a,index:b},a.id))})}):f.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-navy-800/30 rounded-lg",children:[(0,d.jsxs)("span",{className:"text-xs text-gold-400/50 w-6",children:[b+1,"."]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("span",{className:"text-sm text-gold-200",children:a.subjects?.name}),a.subjects?.code&&(0,d.jsxs)("span",{className:"text-xs text-gold-400/70 ml-2",children:["(",a.subjects.code,")"]})]})]},a.id))})]}),g.length>0&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("h4",{className:"text-sm font-medium text-gold-300 flex items-center gap-2",children:[(0,d.jsx)(m.A,{className:"w-4 h-4"}),"Aulas"]}),(0,d.jsx)("div",{className:"grid gap-2 ml-6",children:g.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-navy-800/30 rounded-lg",children:[(0,d.jsxs)("span",{className:"text-xs text-gold-400/50 w-6",children:[b+1,"."]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("span",{className:"text-sm text-gold-200",children:a.title}),a.description&&(0,d.jsx)("p",{className:"text-xs text-gold-400/70 mt-1",children:a.description})]})]},a.id))})]}),0===f.length&&0===g.length&&(0,d.jsx)("p",{className:"text-center text-gold-400/50 py-4",children:"Este m\xf3dulo ainda n\xe3o possui conte\xfado"})]})]},a.id)})}),0===g.length&&(0,d.jsxs)(q.Ay,{className:"text-center py-12",children:[(0,d.jsx)(h.A,{className:"w-12 h-12 text-gold-400/30 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gold-300/70",children:"Este curso ainda n\xe3o possui m\xf3dulos cadastrados"})]})]})}},27122:(a,b,c)=>{c.d(b,{A:()=>l});var d=c(60687),e=c(43210),f=c(85814),g=c.n(f),h=c(16189),i=c(14952),j=c(32192),k=c(92576);function l({items:a,separator:b=(0,d.jsx)(i.A,{className:"w-4 h-4 text-gold-600"}),showHome:c=!0,maxItems:f=5,className:l=""}){let m=(0,h.usePathname)(),n=a||(()=>{let a=m.split("/").filter(Boolean),b=[];c&&b.push({label:"In\xedcio",href:"dashboard"===a[0]?"/dashboard":"/student-dashboard",icon:(0,d.jsx)(j.A,{className:"w-4 h-4"})});let e="";return a.forEach((d,f)=>{if(e+=`/${d}`,c&&0===f&&("dashboard"===d||"student-dashboard"===d))return;let g=d.split("-").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");b.push({label:g,href:f===a.length-1?void 0:e})}),b})(),o=n.length<=f?n:[n[0],{label:"...",href:void 0},...n.slice(-(f-2))];return(0,d.jsx)("nav",{"aria-label":"Breadcrumb",className:`flex items-center space-x-2 ${l}`,children:o.map((a,c)=>(0,d.jsxs)(e.Fragment,{children:[c>0&&(0,d.jsx)("span",{className:"text-gold-600",children:b}),(0,d.jsx)(k.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*c},className:"flex items-center",children:a.href?(0,d.jsxs)(g(),{href:a.href,className:"flex items-center gap-1.5 text-sm font-medium text-gold-400 hover:text-gold-200 transition-colors",children:[a.icon,(0,d.jsx)("span",{children:a.label})]}):(0,d.jsxs)("span",{className:"flex items-center gap-1.5 text-sm font-medium text-gold-100","aria-current":"page",children:[a.icon,(0,d.jsx)("span",{children:a.label})]})})]},c))})}},78272:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}};