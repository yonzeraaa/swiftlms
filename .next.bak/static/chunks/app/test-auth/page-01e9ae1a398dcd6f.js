(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2580],{35695:(e,t,s)=>{"use strict";var n=s(18999);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},46414:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var n=s(83254);let a=null;function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(e&&(a=null),a&&!e)?a:a=(0,n.createBrowserClient)("https://mdzgnktlsmkjecdbermo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1kemdua3Rsc21ramVjZGJlcm1vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwODE3OTcsImV4cCI6MjA2OTY1Nzc5N30.wVS4jMNTenVRSVtiuHFKo9OZ_RfUWiKV8ojN7ch67go",{cookieOptions:{name:"sb-auth-token",maxAge:10800,path:"/",sameSite:"lax",secure:!0},auth:{persistSession:!0,detectSessionInUrl:!0,autoRefreshToken:!0,storage:{getItem:e=>{let t=localStorage.getItem(e);if(t)return t;for(let t of document.cookie.split(";")){let[s,n]=t.trim().split("=");if(s===e)return decodeURIComponent(n)}return null},setItem:(e,t)=>{localStorage.setItem(e,t),document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat("; Secure; SameSite=Lax; Path=/; Max-Age=".concat(10800))},removeItem:e=>{localStorage.removeItem(e),document.cookie="".concat(e,"=; Expires=Thu, 01 Jan 1970 00:00:00 UTC").concat("; Secure; SameSite=Lax; Path=/; Max-Age=0")}}},global:{headers:{"X-Client-Info":"swiftedu-web","X-Client-Version":"2.0"}}})}},66403:(e,t,s)=>{Promise.resolve().then(s.bind(s,79271))},79271:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(95155),a=s(12115),i=s(7815),r=s(46414);function o(){let{session:e,user:t,isLoading:s,refreshSession:o,signOut:c}=(0,i.A)(),[l,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),g=(0,r.U)();(0,a.useEffect)(()=>{x()},[]);let x=async()=>{h(!0);try{let e=await fetch("/api/auth/check"),t=await e.json();d(t)}catch(e){d({error:e.message})}h(!1)},f=async()=>{try{let{error:e}=await g.auth.signInWithPassword({email:"admin@swiftedu.com",password:"admin@123"});if(e)throw e;alert("Login successful! Refreshing..."),window.location.reload()}catch(e){alert("Login error: ".concat(e.message))}},j=async()=>{try{await o(),alert("Session refreshed!"),x()}catch(e){alert("Refresh error: ".concat(e.message))}},S=async()=>{try{let e=await fetch("/api/courses/enroll",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({courseId:"test-course-id",studentIds:["test-student-id"]})}),t=await e.json();m({status:e.status,ok:e.ok,data:t})}catch(e){m({error:e.message})}},y=async()=>{try{let e=await fetch("/api/auth/force-login",{method:"POST",credentials:"include"}),t=await e.json();e.ok?(alert("Login for\xe7ado com sucesso! Recarregando..."),window.location.reload()):alert("Erro: ".concat(t.error))}catch(e){alert("Erro ao for\xe7ar login: ".concat(e.message))}},k=async()=>{try{let e=await fetch("/api/auth/fix-session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})}),t=await e.json();if(!e.ok){let s=prompt("Digite o email para reautenticar:"),n=prompt("Digite a senha:");s&&n&&(e=await fetch("/api/auth/fix-session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s,password:n})}),t=await e.json())}e.ok?(alert("Sess\xe3o corrigida! Recarregando..."),window.location.reload()):alert("Erro: ".concat(t.error))}catch(e){alert("Erro ao corrigir sess\xe3o: ".concat(e.message))}};return(0,n.jsxs)("div",{style:{padding:"20px",fontFamily:"monospace"},children:[(0,n.jsx)("h1",{children:"\uD83D\uDD10 Auth Test Page"}),(0,n.jsxs)("p",{children:["URL: ",window.location.href]}),(0,n.jsxs)("div",{style:{margin:"20px 0",padding:"10px",border:"1px solid #ccc"},children:[(0,n.jsx)("h2",{children:"Current Status"}),(0,n.jsxs)("p",{children:["Loading: ",s?"⏳ Yes":"✅ No"]}),(0,n.jsxs)("p",{children:["Session: ",e?"✅ Active":"❌ None"]}),(0,n.jsxs)("p",{children:["User: ",t?"✅ ".concat(t.email):"❌ None"]}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["User ID: ",e.user.id]}),(0,n.jsxs)("p",{children:["Expires: ",new Date(1e3*e.expires_at).toLocaleString()]})]})]}),(0,n.jsxs)("div",{style:{margin:"20px 0"},children:[(0,n.jsx)("h2",{children:"Actions"}),(0,n.jsx)("button",{onClick:f,style:{margin:"5px",padding:"10px"},children:"\uD83D\uDCE5 Test Login (admin@swiftedu.com)"}),(0,n.jsx)("button",{onClick:j,style:{margin:"5px",padding:"10px"},children:"\uD83D\uDD04 Refresh Session"}),(0,n.jsx)("button",{onClick:c,style:{margin:"5px",padding:"10px"},children:"\uD83D\uDCE4 Sign Out"}),(0,n.jsx)("button",{onClick:x,style:{margin:"5px",padding:"10px"},children:"\uD83D\uDD0D Check Auth API"}),(0,n.jsx)("button",{onClick:()=>{let e=document.cookie.split(";").map(e=>e.trim()).filter(e=>e.includes("sb-")||e.includes("auth")||e.includes("supabase"));alert("Found ".concat(e.length," auth cookies:\n").concat(e.join("\n")))},style:{margin:"5px",padding:"10px"},children:"\uD83C\uDF6A Check Cookies"}),(0,n.jsx)("button",{onClick:()=>{let e=Object.keys(localStorage).filter(e=>e.includes("sb-")||e.includes("supabase")),t=e.map(e=>{var t;return{key:e,value:(null==(t=localStorage.getItem(e))?void 0:t.substring(0,50))+"..."}});alert("Found ".concat(e.length," auth items in localStorage:\n").concat(JSON.stringify(t,null,2)))},style:{margin:"5px",padding:"10px"},children:"\uD83D\uDCBE Check LocalStorage"}),(0,n.jsx)("button",{onClick:S,style:{margin:"5px",padding:"10px"},children:"\uD83C\uDF93 Test Enroll API"}),(0,n.jsx)("button",{onClick:y,style:{margin:"5px",padding:"10px",background:"#00a652",color:"white"},children:"⚡ FORCE LOGIN ADMIN"}),(0,n.jsx)("button",{onClick:k,style:{margin:"5px",padding:"10px",background:"#ff6b6b",color:"white"},children:"\uD83D\uDD27 FIX SESSION (Emerg\xeancia)"})]}),l&&(0,n.jsxs)("div",{style:{margin:"20px 0",padding:"10px",border:"1px solid #ccc"},children:[(0,n.jsx)("h2",{children:"Auth API Results"}),(0,n.jsx)("pre",{style:{overflow:"auto",maxHeight:"400px"},children:JSON.stringify(l,null,2)})]}),p&&(0,n.jsxs)("div",{style:{margin:"20px 0",padding:"10px",border:"1px solid #ccc"},children:[(0,n.jsx)("h2",{children:"Enroll API Test Result"}),(0,n.jsx)("pre",{style:{overflow:"auto",maxHeight:"200px"},children:JSON.stringify(p,null,2)})]}),(0,n.jsxs)("div",{style:{margin:"20px 0",padding:"10px",border:"1px solid #0066ff"},children:[(0,n.jsx)("h2",{children:"\uD83D\uDCCB Checklist para Supabase"}),(0,n.jsx)("p",{children:"Certifique-se de ter configurado no Supabase Dashboard:"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"✅ Site URL: https://swiftedu-rose.vercel.app"}),(0,n.jsx)("li",{children:"✅ Redirect URLs inclui: https://swiftedu-rose.vercel.app/*"}),(0,n.jsx)("li",{children:"✅ Redirect URLs inclui: https://swiftedu-rose.vercel.app/auth/callback"})]})]})]})}}},e=>{e.O(0,[3254,7815,8441,5964,7358],()=>e(e.s=66403)),_N_E=e.O()}]);