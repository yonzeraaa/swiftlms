(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6733],{41060:(e,s,t)=>{Promise.resolve().then(t.bind(t,97557))},48030:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var a=t(95155),l=t(12115),r=t(57434),n=t(33786),o=t(91788),d=t(54416),i=t(57918),c=t(51154),m=t(38274),u=t(60760);function x(e){let{url:s,title:t,onComplete:x}=e,[g,h]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!0),p=(0,l.useRef)(null),v=(0,l.useRef)(null),j=(e=>{if(e.includes("drive.google.com")||e.includes("docs.google.com")){let s="";if(e.includes("/document/d/"))return s=e.split("/document/d/")[1].split("/")[0],"https://docs.google.com/document/d/".concat(s,"/preview");if(e.includes("/presentation/d/"))return s=e.split("/presentation/d/")[1].split("/")[0],"https://docs.google.com/presentation/d/".concat(s,"/embed");if(e.includes("/spreadsheets/d/"))return s=e.split("/spreadsheets/d/")[1].split("/")[0],"https://docs.google.com/spreadsheets/d/".concat(s,"/preview");else if(e.includes("/file/d/"))return s=e.split("/file/d/")[1].split("/")[0],"https://drive.google.com/file/d/".concat(s,"/preview")}if(e.includes("onedrive.live.com")||e.includes("sharepoint.com")){let s=e.replace("/view.aspx","/embed.aspx");return s.includes("embed.aspx")?s:"".concat(e,"?embed=true")}return e.includes("dropbox.com")?e.replace("?dl=0","?raw=1"):(e.endsWith(".pdf"),e)})(s);(0,l.useEffect)(()=>{let e=()=>{h(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,l.useEffect)(()=>{if(x){let e=setTimeout(()=>{x()},1e4);return()=>clearTimeout(e)}},[x]);let N=j.endsWith(".pdf");return(0,a.jsxs)("div",{ref:p,className:"relative w-full h-[600px] bg-navy-900/50 rounded-lg overflow-hidden flex flex-col",children:[(0,a.jsx)("div",{className:"relative bg-gradient-to-b from-black/70 to-transparent p-4 z-10 flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(r.A,{className:"w-5 h-5 text-gold-400"}),(0,a.jsx)("h3",{className:"text-white font-medium",children:t||"Documento"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>window.open(s,"_blank"),className:"p-2 rounded-full bg-gold-500/20 hover:bg-gold-500/30 transition-colors",title:"Abrir em nova aba",children:(0,a.jsx)(n.A,{className:"w-4 h-4 text-white"})}),!N&&(0,a.jsx)(m.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>window.open(s,"_blank"),className:"p-2 rounded-full bg-gold-500/20 hover:bg-gold-500/30 transition-colors",title:"Baixar documento",children:(0,a.jsx)(o.A,{className:"w-4 h-4 text-white"})}),(0,a.jsx)(m.P.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>{if(g)document.exitFullscreen&&document.exitFullscreen();else{var e;(null==(e=p.current)?void 0:e.requestFullscreen)&&p.current.requestFullscreen()}h(!g)},className:"p-2 rounded-full bg-gold-500/20 hover:bg-gold-500/30 transition-colors",title:g?"Sair da tela cheia":"Tela cheia",children:g?(0,a.jsx)(d.A,{className:"w-4 h-4 text-white"}):(0,a.jsx)(i.A,{className:"w-4 h-4 text-white"})})]})]})}),(0,a.jsx)(u.N,{children:f&&(0,a.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-navy-900/50 z-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 text-gold-500 animate-spin mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gold-300",children:"Carregando documento..."})]})})}),(0,a.jsx)("div",{className:"relative flex-1 w-full",children:N?(0,a.jsx)("embed",{src:j,type:"application/pdf",className:"w-full h-full",onLoad:()=>b(!1)}):(0,a.jsx)("iframe",{ref:v,src:j,className:"w-full h-full",frameBorder:"0",allowFullScreen:!0,onLoad:()=>b(!1),sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",title:t||"Documento",style:{border:"none"}})}),!f&&(0,a.jsx)("div",{className:"absolute bottom-4 left-4 right-4 bg-navy-800/90 rounded-lg p-3 text-center z-20",children:(0,a.jsxs)("p",{className:"text-gold-300 text-sm",children:["Problemas para visualizar?",(0,a.jsx)("button",{onClick:()=>window.open(s,"_blank"),className:"ml-2 text-gold-400 hover:text-gold-200 underline",children:"Abrir documento original"})]})})]})}},97557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var a=t(95155),l=t(12115),r=t(35695),n=t(46414),o=t(48030),d=t(57434),i=t(54416),c=t(12486),m=t(40646),u=t(9428),x=t(30461);function g(e){let{questionCount:s,answers:t,onChange:l}=e,r=["A","B","C","D","E"],{t:n}=(0,x.B)();return(0,a.jsxs)("div",{className:"space-y-4",children:[[...Array(s)].map((e,s)=>{let o=s+1,d=t[o],i=!!d;return(0,a.jsxs)("div",{className:"\n              border-2 rounded-lg p-3 transition-all animate-fade-in\n              ".concat(i?"border-gold-500 bg-navy-800/50":"border-gold-500/30 bg-navy-800/30","\n            "),style:{animationDelay:"".concat(50*s,"ms")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-semibold text-gold",children:[n("test.question")," ",o]}),i?(0,a.jsx)(m.A,{className:"w-4 h-4 text-gold-400"}):(0,a.jsx)(u.A,{className:"w-4 h-4 text-gold-500/50"})]}),i&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 bg-gold-500/20 text-gold-300 rounded-full border border-gold-500/30",children:[n("test.answered"),": ",d]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:r.map(e=>(0,a.jsxs)("label",{className:"flex-1 relative cursor-pointer group",children:[(0,a.jsx)("input",{type:"radio",name:"question-".concat(o),value:e,checked:d===e,onChange:()=>l(o,e),className:"sr-only"}),(0,a.jsx)("div",{className:"\n                    text-center py-2 px-3 rounded-lg border-2 transition-all\n                    ".concat(d===e?"border-gold-400 bg-gradient-to-r from-gold-500 to-gold-600 text-navy-900 font-bold shadow-lg shadow-gold-500/30":"border-gold-500/30 bg-navy-700/50 text-gold-300 hover:border-gold-400 hover:bg-navy-700 hover:text-gold","\n                  "),children:e}),d===e&&(0,a.jsx)("div",{className:"absolute inset-0 border-2 border-gold-400 rounded-lg pointer-events-none animate-pulse"})]},e))})]},o)}),0===s&&(0,a.jsx)("div",{className:"text-center py-8 text-gold-400",children:(0,a.jsx)("p",{children:n("test.loadingQuestions")})})]})}var h=t(767);function f(e){let{testId:s,isOpen:t,onToggle:r,answers:n,onAnswerChange:o,onSubmit:m,questionCount:u,submitting:f=!1}=e,[b,p]=(0,l.useState)(!1),{t:v}=(0,x.B)(),j=Object.keys(n).length,N=u>0?j/u*100:0;return((0,l.useEffect)(()=>{let e=()=>{p(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),b)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:r,className:"fixed bottom-6 right-6 z-40 bg-gradient-to-r from-gold-500 to-gold-600 text-navy-900 rounded-full p-4 shadow-lg hover:shadow-gold-500/30 transition-all hover:scale-110 border border-gold-400",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-bold",children:v("test.answers")}),(0,a.jsxs)("span",{className:"bg-navy-900/20 px-2 py-0.5 rounded-full text-sm font-medium",children:[j,"/",u]})]})}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onClick:r,className:"fixed inset-0 bg-black/70 z-40 animate-fade-in"}),(0,a.jsxs)("div",{className:"fixed inset-x-0 bottom-0 z-50 bg-gradient-to-br from-navy-800 to-navy-900 rounded-t-2xl max-h-[80vh] overflow-hidden shadow-2xl border-t-2 border-gold-500 animate-slide-up",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gold-500/30 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gold",children:v("test.answerSheet")}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-navy-700/50 rounded-lg transition-colors",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-gold-300"})})]}),(0,a.jsxs)("div",{className:"p-4 overflow-y-auto max-h-[60vh] bg-navy-900",children:[0===u?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-gold-300",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold-500 mb-4"}),(0,a.jsx)("p",{className:"text-lg",children:"Carregando quest\xf5es..."}),(0,a.jsx)("p",{className:"text-sm text-gold-400/60 mt-2",children:"Por favor, aguarde"})]}):(0,a.jsx)(g,{questionCount:u,answers:n,onChange:o}),(0,a.jsx)(h.A,{variant:"primary",onClick:m,disabled:f||0===j,className:"w-full mt-6",icon:f?void 0:(0,a.jsx)(c.A,{className:"w-5 h-5"}),iconPosition:"left",children:f?"Enviando...":"Enviar Respostas"})]})]})]})]}):(0,a.jsx)(a.Fragment,{children:t&&(0,a.jsx)("div",{className:"w-[30%] border-l-2 border-gold-500 bg-gradient-to-br from-navy-800 to-navy-900 overflow-hidden transition-all duration-300 animate-fade-in",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gold-500/30 bg-navy-900/50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gold flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-gold-400"}),v("test.answerSheet")]}),(0,a.jsx)("button",{onClick:r,className:"p-1 hover:bg-navy-700/50 rounded-lg transition-colors",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-gold-300"})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gold-300",children:[(0,a.jsx)("span",{children:v("test.progress")}),(0,a.jsxs)("span",{className:"font-medium",children:[j," ",v("common.of")," ",u," ",v("test.questions")]})]}),(0,a.jsx)("div",{className:"w-full bg-navy-700 rounded-full h-2 border border-gold-500/20",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-gold-500 to-gold-600 h-2 rounded-full transition-all duration-300 shadow-lg shadow-gold-500/30",style:{width:"".concat(N,"%")}})})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-navy-900",children:0===u?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gold-300",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gold-500 mb-4"}),(0,a.jsx)("p",{className:"text-lg",children:"Carregando quest\xf5es..."}),(0,a.jsx)("p",{className:"text-sm text-gold-400/60 mt-2",children:"Por favor, aguarde"})]}):(0,a.jsx)(g,{questionCount:u,answers:n,onChange:o})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gold-500/30 bg-navy-900/50",children:[(0,a.jsx)(h.A,{variant:"primary",onClick:m,disabled:f||0===j,className:"w-full",size:"lg",icon:f?void 0:(0,a.jsx)(c.A,{className:"w-5 h-5"}),iconPosition:"left",children:f?"Enviando...":"Enviar Respostas"}),0===j&&(0,a.jsx)("p",{className:"text-xs text-gold-400/60 mt-2 text-center",children:v("test.answerAtLeastOne")})]})]})})})}var b=t(14186),p=t(381),v=t(79720);function j(e){let{test:s,enrollmentId:t,onComplete:r}=e,[i,c]=(0,l.useState)(!1),[m,u]=(0,l.useState)({}),[g,j]=(0,l.useState)(0),[N,w]=(0,l.useState)(null),[y]=(0,l.useState)(new Date),[_,S]=(0,l.useState)(!1),[A,k]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[q,I]=(0,l.useState)(!1),[P,T]=(0,l.useState)("10"),z=(0,n.U)(),{t:O}=(0,x.B)();(0,l.useEffect)(()=>{L(),B(),s.duration_minutes&&w(60*s.duration_minutes)},[s]),(0,l.useEffect)(()=>{if(null===N||N<=0)return;let e=setInterval(()=>{w(e=>e&&e<=1?(F(),0):e?e-1:null)},1e3);return()=>clearInterval(e)},[N]);let L=async()=>{E(!0);try{let{data:e,error:t,count:a}=await z.from("test_answer_keys").select("question_number",{count:"exact"}).eq("test_id",s.id).order("question_number",{ascending:!1});if(e&&e.length>0&&!t){let s=e[0].question_number;j(s),console.log("N\xfamero de quest\xf5es do gabarito: ".concat(s," (total de ").concat(a," respostas cadastradas)"))}else{let e=localStorage.getItem("test_question_count_".concat(s.id)),t=e?parseInt(e):10;j(t),console.log("Gabarito n\xe3o encontrado, usando n\xfamero de quest\xf5es:",t)}}catch(t){console.error("Erro ao carregar n\xfamero de quest\xf5es:",t);let e=localStorage.getItem("test_question_count_".concat(s.id));j(e?parseInt(e):10)}finally{E(!1)}},B=()=>{let e=localStorage.getItem("test_answers_".concat(s.id));if(e)try{u(JSON.parse(e))}catch(e){console.error("Erro ao carregar respostas salvas:",e)}},F=async()=>{if(_||A)return;let e=Object.keys(m).length;if(!(e<g)||confirm("Voc\xea respondeu apenas ".concat(e," de ").concat(g," quest\xf5es. Deseja enviar mesmo assim?"))){S(!0);try{let e=await fetch("/api/tests/".concat(s.id,"/submit"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:m})}),t=await e.json();t.success?(k(!0),localStorage.removeItem("test_answers_".concat(s.id)),r&&r(t.attempt.id,t.attempt.score,t.attempt.passed)):alert(t.error||"Erro ao enviar teste")}catch(e){console.error("Erro ao enviar:",e),alert("Erro ao enviar teste")}finally{S(!1)}}};return(0,a.jsxs)("div",{className:"h-screen bg-navy-900 flex flex-col",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-navy-800 to-navy-900 border-b border-gold-500/30 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-gold-500/30 to-gold-600/20 rounded-lg border border-gold-500/30",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gold",children:s.title}),s.description&&(0,a.jsx)("p",{className:"text-gold-300/80 mt-1",children:s.description})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[null!==N&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg border ".concat(N<300?"bg-red-900/30 text-red-400 border-red-500/50 animate-pulse":"bg-navy-900/50 text-gold-300 border-gold-500/30"),children:[(0,a.jsx)(b.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:(e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60;return s>0?"".concat(s,"h ").concat(t.toString().padStart(2,"0"),"m ").concat(a.toString().padStart(2,"0"),"s"):"".concat(t,":").concat(a.toString().padStart(2,"0"))})(N)})]}),!i&&!A&&(0,a.jsx)(h.A,{variant:"primary",onClick:()=>c(!0),icon:(0,a.jsx)(d.A,{className:"w-4 h-4"}),iconPosition:"left",disabled:0===g&&!q,children:"Responder Teste"})]})]})}),q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",children:(0,a.jsx)(v.Ay,{variant:"elevated",className:"max-w-md border-2 border-gold-500 shadow-2xl shadow-gold-500/20",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-gold-500/30 to-gold-600/20 rounded-lg border border-gold-500/30",children:(0,a.jsx)(p.A,{className:"w-6 h-6 text-gold"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gold",children:"Configurar Teste"})]}),(0,a.jsx)("p",{className:"text-gold-300 mb-4",children:"Por favor, confirme o n\xfamero de quest\xf5es do teste:"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:"N\xfamero de Quest\xf5es"}),(0,a.jsx)("input",{type:"number",min:"1",max:"100",value:P,onChange:e=>T(e.target.value),className:"w-full px-4 py-2 bg-navy-800 border border-gold-500/30 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500",placeholder:"Ex: 20"})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)(h.A,{variant:"primary",onClick:()=>{let e=parseInt(P);e>0&&e<=100?(j(e),localStorage.setItem("test_question_count_".concat(s.id),e.toString()),I(!1)):alert("Por favor, insira um n\xfamero entre 1 e 100")},className:"flex-1",children:"Confirmar"})}),(0,a.jsx)("p",{className:"text-xs text-gold-400/60 mt-3 text-center",children:"Esta configura\xe7\xe3o ser\xe1 salva para pr\xf3ximas tentativas"})]})})}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden bg-navy-900",children:[(0,a.jsx)("div",{className:"transition-all duration-300 ".concat(i&&!A?"w-full lg:w-[70%]":"w-full"),children:(0,a.jsx)("div",{className:"h-full p-4",children:(0,a.jsx)(v.Ay,{variant:"elevated",className:"h-full border border-gold-500/30",children:(0,a.jsx)(o.A,{url:s.google_drive_url,title:s.title})})})}),!A&&(0,a.jsx)(f,{testId:s.id,isOpen:i,onToggle:()=>c(!i),answers:m,onAnswerChange:(e,t)=>{let a={...m,[e]:t};u(a),localStorage.setItem("test_answers_".concat(s.id),JSON.stringify(a))},onSubmit:F,questionCount:g,submitting:_})]}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 animate-fade-in",children:(0,a.jsx)(v.Ay,{variant:"gradient",className:"max-w-md text-center transform animate-scale-in border-2 border-gold-500 shadow-2xl shadow-gold-500/20",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/30 to-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-500/50",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gold mb-2",children:"Teste Enviado!"}),(0,a.jsx)("p",{className:"text-gold-300",children:"Suas respostas foram registradas com sucesso."})]})})})]})}var N=t(89291),w=t(38758),y=t(35169),_=t(6874),S=t.n(_);function A(e){let{params:s}=e,[t,o]=(0,l.useState)(null),[d,i]=(0,l.useState)(null),[c,m]=(0,l.useState)(!0),[u,g]=(0,l.useState)(!1),[h,f]=(0,l.useState)(null),b=(0,r.useRouter)(),p=(0,n.U)(),{t:v}=(0,x.B)();(0,l.useEffect)(()=>{_()},[]);let _=async()=>{try{let{id:e}=await s,{data:{user:t}}=await p.auth.getUser();if(!t)return void b.push("/login");let{data:a,error:l}=await p.from("tests").select("*").eq("id",e).single();if(l||!a){console.error("Erro ao carregar teste:",l),b.push("/student-dashboard/tests");return}if(!a.is_active){alert(v("test.notAvailable")),b.push("/student-dashboard/tests");return}o(a);let{data:r}=await p.from("enrollments").select("id").eq("user_id",t.id).eq("course_id",a.course_id||"").single();if(!r){alert(v("test.enrollmentRequired")),b.push("/student-dashboard/tests");return}i(r.id);let{data:n}=await p.from("test_attempts").select("*").eq("test_id",e).eq("user_id",t.id).order("attempt_number",{ascending:!1}),d=a.max_attempts||3;if((n?n.length:0)>=d)return void b.push("/student-dashboard/tests/".concat(e,"/results"))}catch(e){console.error("Erro ao carregar dados:",e),b.push("/student-dashboard/tests")}finally{m(!1)}};return c?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-full max-w-2xl",children:(0,a.jsx)(w.u4,{})})}):t&&d?u&&h?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(S(),{href:"/student-dashboard/tests",className:"inline-flex items-center gap-2 text-gold-300 hover:text-gold transition-colors group",children:[(0,a.jsx)(y.A,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),v("test.backToTests")]})}),(0,a.jsx)(N.A,{testId:t.id,attemptId:h.id,score:h.score,passed:h.passed,correctCount:h.correctCount,totalQuestions:h.totalQuestions,passingScore:t.passing_score||70,onRetry:()=>{g(!1),f(null),_()},onExit:()=>b.push("/student-dashboard/tests")})]}):(0,a.jsx)("div",{className:"h-screen -m-8",children:(0,a.jsx)(j,{test:t,enrollmentId:d,onComplete:(e,s,t)=>{p.from("test_attempts").select("*").eq("id",e).single().then(a=>{let{data:l}=a;if(l){let a=Object.keys(l.answers).length;f({id:e,score:s,passed:t,correctCount:Math.round(s*a/100),totalQuestions:a}),g(!0)}})}})}):null}}},e=>{e.O(0,[3254,9051,7244,8113,5649,1338,9760,1624,9291,8441,5964,7358],()=>e(e.s=41060)),_N_E=e.O()}]);