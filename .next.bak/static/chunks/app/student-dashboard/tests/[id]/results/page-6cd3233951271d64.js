(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2124],{33109:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},53369:(e,t,s)=>{Promise.resolve().then(s.bind(s,68329))},53904:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},57340:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},68329:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(95155),r=s(12115),d=s(35695),l=s(46414),n=s(89291),i=s(38758),c=s(35169),o=s(6874),h=s.n(o),u=s(30461),m=s(79720),p=s(767);function x(e){var t;let{params:s}=e,[o,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[k,N]=(0,r.useState)(!1),_=(0,d.useRouter)(),A=(0,l.U)(),{t:w}=(0,u.B)();(0,r.useEffect)(()=>{M()},[]);let M=async()=>{try{let{id:e}=await s,{data:{user:t}}=await A.auth.getUser();if(!t)return void _.push("/login");let{data:a}=await A.from("tests").select("*").eq("id",e).single();if(!a)return void _.push("/student-dashboard/tests");x(a);let{data:r}=await A.from("test_attempts").select("*").eq("test_id",e).eq("user_id",t.id).order("attempt_number",{ascending:!1}).limit(1);if(!r||!(r.length>0))return void _.push("/student-dashboard/tests/".concat(e));{y(r[0]);let e=a.max_attempts||3,t=r[0].attempt_number||1;N(t<e)}let{data:d}=await A.from("test_grades").select("*").eq("test_id",e).eq("user_id",t.id).single();d&&b(d)}catch(e){console.error("Erro ao carregar resultados:",e),_.push("/student-dashboard/tests")}finally{j(!1)}},S=()=>{_.push("/student-dashboard/tests")};if(g)return(0,a.jsx)("div",{className:"min-h-screen space-y-4",children:[void 0,void 0].map((e,t)=>(0,a.jsx)("div",{style:{animationDelay:"".concat(100*t,"ms")},children:(0,a.jsx)(i.u4,{})},t))});if(!o||!v)return(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsxs)(m.Ay,{variant:"elevated",className:"p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gold",children:w("test.noResultsFound")}),(0,a.jsx)("p",{className:"text-gold-300 mb-6",children:w("test.noResultsDescription")}),(0,a.jsx)(p.A,{onClick:S,variant:"primary",children:w("test.backToTests")})]})});let q=v.score||0,E=q>=(o.passing_score||70),C=Object.keys(v.answers||{}).length,H=Math.round(q*C/100);return(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(h(),{href:"/student-dashboard/tests",className:"inline-flex items-center gap-2 text-gold-300 hover:text-gold transition-colors group",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 transition-transform group-hover:-translate-x-1"}),w("test.backToTests")]})}),(0,a.jsx)(n.A,{testId:o.id,attemptId:v.id,score:q,passed:E,correctCount:H,totalQuestions:C,passingScore:o.passing_score||70,onRetry:k?()=>{o&&k&&_.push("/student-dashboard/tests/".concat(o.id))}:void 0,onExit:S}),(0,a.jsxs)(m.Ay,{variant:"elevated",className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gold mb-4",children:w("test.attemptHistory")}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gold-300",children:[w("test.attemptNumber"),":"]}),(0,a.jsxs)("span",{className:"text-gold font-medium",children:[v.attempt_number," / ",o.max_attempts||3]})]}),f&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gold-300",children:[w("test.bestScore"),":"]}),(0,a.jsxs)("span",{className:"text-gold font-medium",children:[(null==(t=f.best_score)?void 0:t.toFixed(1))||0,"%"]})]})})]})]})]})}},78749:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},92657:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[3254,9051,7244,8113,1338,9760,1624,9291,8441,5964,7358],()=>e(e.s=53369)),_N_E=e.O()}]);