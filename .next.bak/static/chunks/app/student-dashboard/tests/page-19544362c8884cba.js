(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6089],{22414:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var a=t(95155),l=t(12115),r=t(46414),n=t(81191),o=t(69037),d=t(40133),i=t(85339),c=t(57434),x=t(14186),m=t(40646),g=t(33109),u=t(47924),h=t(16785),p=t(28833),b=t(92657),f=t(79720),v=t(767),j=t(97893),N=t(38758),y=t(30461),w=t(6874),A=t.n(w),_=t(35494);function C(){let[e,s]=(0,l.useState)([]),[t,w]=(0,l.useState)(!0),[C,T]=(0,l.useState)("all"),[k,P]=(0,l.useState)(""),[S,E]=(0,l.useState)("recent"),L=(0,r.U)(),{t:z}=(0,y.B)();(0,l.useEffect)(()=>{q()},[]);let q=async()=>{try{let{data:{user:e}}=await L.auth.getUser();if(!e)return;let{data:t}=await L.from("enrollments").select("course_id").eq("user_id",e.id);if(!t||0===t.length){s([]),w(!1);return}let a=t.map(e=>e.course_id),{data:l}=await L.from("tests").select("\n          *,\n          course:courses(*),\n          subject:subjects(*)\n        ").in("course_id",a).eq("is_active",!0).order("created_at",{ascending:!1});if(l){let t=l.map(e=>e.id),{data:a}=await L.from("test_grades").select("*").eq("user_id",e.id).in("test_id",t),r=l.map(e=>({...e,grade:(null==a?void 0:a.find(s=>s.test_id===e.id))||void 0}));s(r)}}catch(e){console.error("Erro ao carregar testes:",e)}finally{w(!1)}},D={total:e.length,pending:e.filter(e=>{if(!e.grade)return!0;let s=e.grade.best_score&&e.grade.best_score>=(e.passing_score||70),t=(e.grade.total_attempts||0)<(e.max_attempts||3);return!s&&t}).length,completed:e.filter(e=>e.grade&&null!==e.grade.best_score).length,averageScore:e.filter(e=>{var s;return null==(s=e.grade)?void 0:s.best_score}).reduce((e,s)=>{var t;return e+((null==(t=s.grade)?void 0:t.best_score)||0)},0)/(e.filter(e=>{var s;return null==(s=e.grade)?void 0:s.best_score}).length||1)};if(t)return(0,a.jsxs)("div",{className:"min-h-screen space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 text-gold-400"}),"Meus Testes"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{style:{animationDelay:"".concat(100*s,"ms")},children:(0,a.jsx)(N.u4,{})},s))})]});let M=(()=>{let s=e;switch(C){case"pending":s=s.filter(e=>{if(!e.grade)return!0;let s=e.grade.best_score&&e.grade.best_score>=(e.passing_score||70),t=(e.grade.total_attempts||0)<(e.max_attempts||3);return!s&&t});break;case"completed":s=s.filter(e=>e.grade&&null!==e.grade.best_score)}switch(k&&(s=s.filter(e=>{var s,t,a;return e.title.toLowerCase().includes(k.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(k.toLowerCase()))||(null==(t=e.course)?void 0:t.title.toLowerCase().includes(k.toLowerCase()))||(null==(a=e.subject)?void 0:a.name.toLowerCase().includes(k.toLowerCase()))})),S){case"deadline":s=[...s].sort((e,s)=>{let t=new Date(e.created_at||"").getTime();return new Date(s.created_at||"").getTime()-t});break;case"score":s=[...s].sort((e,s)=>{var t,a;let l=(null==(t=e.grade)?void 0:t.best_score)||0;return((null==(a=s.grade)?void 0:a.best_score)||0)-l})}return s})();return(0,a.jsxs)("div",{className:"min-h-screen space-y-6",children:[(0,a.jsx)(_.A,{className:"mb-2"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-8 h-8 text-gold-400"}),"Meus Testes"]}),(0,a.jsx)("div",{className:"text-gold-400/60 text-sm",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(f.Ay,{variant:"elevated",className:"border-l-4 border-gold-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gold-300",children:"Total de Testes"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gold",children:D.total})]}),(0,a.jsx)("div",{className:"p-3 bg-gold-500/10 rounded-lg",children:(0,a.jsx)(n.A,{className:"w-6 h-6 text-gold-500"})})]})}),(0,a.jsx)(f.Ay,{variant:"elevated",className:"border-l-4 border-blue-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gold-300",children:"Pendentes"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gold",children:D.pending})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-blue-500"})})]})}),(0,a.jsx)(f.Ay,{variant:"elevated",className:"border-l-4 border-green-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gold-300",children:"Conclu\xeddos"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gold",children:D.completed})]}),(0,a.jsx)("div",{className:"p-3 bg-green-500/10 rounded-lg",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-green-500"})})]})}),(0,a.jsx)(f.Ay,{variant:"elevated",className:"border-l-4 border-purple-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gold-300",children:"M\xe9dia Geral"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gold",children:[D.averageScore.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:(0,a.jsx)(g.A,{className:"w-6 h-6 text-purple-500"})})]})})]}),(0,a.jsx)(f.Ay,{variant:"elevated",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gold-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Buscar testes...",value:k,onChange:e=>P(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-navy-900/50 border border-gold-500/30 rounded-xl text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent transition-all"})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,a.jsxs)("button",{onClick:()=>T("all"),className:"px-4 py-2 rounded-lg font-medium transition-all border ".concat("all"===C?"bg-gradient-to-r from-gold-500 to-gold-600 text-navy-900 border-gold-400 shadow-lg shadow-gold-500/20":"bg-navy-900/50 text-gold-300 hover:bg-navy-900/70 border-gold-500/30"),children:["Todos (",D.total,")"]}),(0,a.jsxs)("button",{onClick:()=>T("pending"),className:"px-4 py-2 rounded-lg font-medium transition-all border ".concat("pending"===C?"bg-gradient-to-r from-gold-500 to-gold-600 text-navy-900 border-gold-400 shadow-lg shadow-gold-500/20":"bg-navy-900/50 text-gold-300 hover:bg-navy-900/70 border-gold-500/30"),children:["Pendentes (",D.pending,")"]}),(0,a.jsxs)("button",{onClick:()=>T("completed"),className:"px-4 py-2 rounded-lg font-medium transition-all border ".concat("completed"===C?"bg-gradient-to-r from-gold-500 to-gold-600 text-navy-900 border-gold-400 shadow-lg shadow-gold-500/20":"bg-navy-900/50 text-gold-300 hover:bg-navy-900/70 border-gold-500/30"),children:["Conclu\xeddos (",D.completed,")"]})]}),(0,a.jsxs)("select",{value:S,onChange:e=>E(e.target.value),className:"px-4 py-2 bg-navy-900/50 border border-gold-500/30 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent transition-all",children:[(0,a.jsx)("option",{value:"recent",children:"Mais Recentes"}),(0,a.jsx)("option",{value:"deadline",children:"Por Prazo"}),(0,a.jsx)("option",{value:"score",children:"Por Nota"})]})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:M.map((e,s)=>{let t=(e=>{if(!e.grade)return{label:"N\xe3o Iniciado",color:"bg-navy-900/50 text-gold-300 border border-gold-500/30",icon:n.A};let s=e.grade.total_attempts||0,t=e.max_attempts||3,a=s<t;return e.grade.best_score&&e.grade.best_score>=(e.passing_score||70)?{label:"Aprovado",color:"bg-green-900/30 text-green-400 border border-green-500/50",icon:o.A}:a?{label:"".concat(s,"/").concat(t," Tentativas"),color:"bg-gold-900/30 text-gold-400 border border-gold-500/50",icon:d.A}:{label:"Tentativas Esgotadas",color:"bg-red-900/30 text-red-400 border border-red-500/50",icon:i.A}})(e),l=t.icon,r=!e.grade||(e.grade.total_attempts||0)<(e.max_attempts||3);return(0,a.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.02] animate-fade-in",style:{animationDelay:"".concat(50*s,"ms")},children:(0,a.jsx)(f.Ay,{variant:"elevated",className:"h-full border-l-4 border-gold-500 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-gold-500/30 to-gold-600/20 rounded-lg border border-gold-500/30",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-gold"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gold",children:e.title}),e.course&&(0,a.jsxs)("p",{className:"text-xs text-gold-300",children:[e.course.title,e.subject&&" â€¢ ".concat(e.subject.code?"".concat(e.subject.code," - ").concat(e.subject.name):e.subject.name)]})]})]}),(0,a.jsxs)("div",{className:"px-2 py-1 rounded-full flex items-center gap-1 text-xs ".concat(t.color),children:[(0,a.jsx)(l,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"font-medium",children:t.label})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gold-300/80 mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gold-400",children:[(0,a.jsx)(x.A,{className:"w-3 h-3 text-gold-500/50"}),(0,a.jsxs)("span",{children:[e.duration_minutes,"min"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gold-400",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 text-gold-500/50"}),(0,a.jsxs)("span",{children:[e.passing_score,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gold-400",children:[(0,a.jsx)(d.A,{className:"w-3 h-3 text-gold-500/50"}),(0,a.jsxs)("span",{children:[e.max_attempts,"x"]})]})]}),e.grade&&null!==e.grade.best_score&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-gold-300",children:"Melhor nota"}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(e.grade.best_score>=(e.passing_score||70)?"text-green-400":"text-red-400"),children:[e.grade.best_score.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"h-2 bg-navy-800 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all duration-500 ".concat(e.grade.best_score>=(e.passing_score||70)?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-red-500 to-red-600"),style:{width:"".concat(Math.min(100,e.grade.best_score),"%")}})})]}),(0,a.jsx)("div",{className:"mt-auto flex gap-2",children:r?(0,a.jsx)(A(),{href:"/student-dashboard/tests/".concat(e.id),className:"flex-1",children:(0,a.jsx)(v.A,{variant:"primary",size:"sm",className:"w-full",icon:e.grade?(0,a.jsx)(d.A,{className:"w-4 h-4"}):(0,a.jsx)(p.A,{className:"w-4 h-4"}),iconPosition:"left",children:e.grade?"Tentar Novamente":"Responder Teste"})}):e.grade&&(0,a.jsx)(A(),{href:"/student-dashboard/tests/".concat(e.id,"/results"),className:"flex-1",children:(0,a.jsx)(v.A,{variant:"secondary",size:"sm",className:"w-full",icon:(0,a.jsx)(b.A,{className:"w-4 h-4"}),iconPosition:"left",children:"Ver Resultado"})})})]})})},e.id)})}),0===M.length&&(0,a.jsx)(j.Ay,{variant:"no-data",iconType:"files",title:k?"Nenhum resultado encontrado":"pending"===C?"Nenhum teste pendente":"completed"===C?"Nenhum teste conclu\xeddo":"Nenhum teste dispon\xedvel",description:"Verifique novamente mais tarde",size:"lg"})]})}},22762:(e,s,t)=>{Promise.resolve().then(t.bind(t,22414))},35494:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var a=t(95155),l=t(12115),r=t(6874),n=t.n(r),o=t(35695),d=t(13052),i=t(57340),c=t(38274);function x(e){let{items:s,separator:t=(0,a.jsx)(d.A,{className:"w-4 h-4 text-gold-600"}),showHome:r=!0,maxItems:x=5,className:m=""}=e,g=(0,o.usePathname)(),u=s||(()=>{let e=g.split("/").filter(Boolean),s=[];r&&s.push({label:"In\xedcio",href:"dashboard"===e[0]?"/dashboard":"/student-dashboard",icon:(0,a.jsx)(i.A,{className:"w-4 h-4"})});let t="";return e.forEach((a,l)=>{if(t+="/".concat(a),r&&0===l&&("dashboard"===a||"student-dashboard"===a))return;let n=a.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");s.push({label:n,href:l===e.length-1?void 0:t})}),s})(),h=u.length<=x?u:[u[0],{label:"...",href:void 0},...u.slice(-(x-2))];return(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 ".concat(m),children:h.map((e,s)=>(0,a.jsxs)(l.Fragment,{children:[s>0&&(0,a.jsx)("span",{className:"text-gold-600",children:t}),(0,a.jsx)(c.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center",children:e.href?(0,a.jsxs)(n(),{href:e.href,className:"flex items-center gap-1.5 text-sm font-medium text-gold-400 hover:text-gold-200 transition-colors",children:[e.icon,(0,a.jsx)("span",{children:e.label})]}):(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-sm font-medium text-gold-100","aria-current":"page",children:[e.icon,(0,a.jsx)("span",{children:e.label})]})})]},s))})}},97893:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>N});var a=t(95155),l=t(79323),r=t(47924),n=t(17580),o=t(5040),d=t(14395),i=t(97108),c=t(54213),x=t(18186),m=t(69074),g=t(81497),u=t(86151),h=t(27213),p=t(71613),b=t(53311),f=t(767);let v={files:l.A,search:r.A,users:n.A,courses:o.A,folder:d.A,inbox:i.A,database:c.A,trophy:x.A,calendar:m.A,messages:g.A,shop:u.A,image:h.A,custom:p.A},j={default:{title:"Nenhum item encontrado",description:"Ainda n\xe3o h\xe1 dados para exibir aqui.",iconType:"inbox"},search:{title:"Nenhum resultado encontrado",description:"Tente ajustar seus filtros ou termos de busca.",iconType:"search"},error:{title:"Algo deu errado",description:"Ocorreu um erro ao carregar os dados. Por favor, tente novamente.",iconType:"files"},success:{title:"Tudo pronto!",description:"Sua configura\xe7\xe3o foi conclu\xedda com sucesso.",iconType:"trophy"},"no-data":{title:"Sem dados dispon\xedveis",description:"Comece adicionando alguns itens para v\xea-los aqui.",iconType:"database"},"no-access":{title:"Acesso restrito",description:"Voc\xea n\xe3o tem permiss\xe3o para visualizar este conte\xfado.",iconType:"folder"},"coming-soon":{title:"Em breve",description:"Esta funcionalidade estar\xe1 dispon\xedvel em breve.",iconType:"calendar"}};function N(e){let{variant:s="default",title:t,description:l,icon:r,iconType:n,action:o,secondaryAction:d,size:i="md",animate:c=!0,className:x=""}=e,m=j[s],g=t||m.title,u=l||m.description,h=v[n||m.iconType],p={sm:{container:"py-8 px-4",icon:"w-16 h-16",title:"text-lg",description:"text-sm",spacing:"space-y-3"},md:{container:"py-12 px-6",icon:"w-24 h-24",title:"text-xl",description:"text-base",spacing:"space-y-4"},lg:{container:"py-16 px-8",icon:"w-32 h-32",title:"text-2xl",description:"text-lg",spacing:"space-y-6"}}[i],N={default:"text-gold-300",search:"text-gold-400",error:"text-red-400",success:"text-green-400","no-data":"text-gold-300","no-access":"text-gold-400","coming-soon":"text-purple-400"};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(p.container," ").concat(x),children:[(0,a.jsxs)("div",{className:"".concat(p.spacing," text-center max-w-md mx-auto"),children:[(0,a.jsxs)("div",{className:"relative inline-block ".concat(c?"animate-fade-in":""),children:[(0,a.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute ".concat(p.icon," rounded-full bg-gradient-to-br from-gold-500/10 to-transparent animate-pulse")}),(0,a.jsx)("div",{className:"absolute ".concat(p.icon," rounded-full bg-gradient-to-tr from-gold-500/5 to-transparent animate-pulse animation-delay-500")})]}),r||("coming-soon"===s?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.A,{className:"".concat(p.icon," ").concat(N[s]," animate-pulse")}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 bg-gold-400 rounded-full animate-ping"})})]}):(0,a.jsx)(h,{className:"".concat(p.icon," ").concat(N[s]," relative z-10 ").concat(c?"animate-float":"")}))]}),(0,a.jsx)("h3",{className:"".concat(p.title," font-bold text-gold ").concat(c?"animate-fade-in animation-delay-200":""),children:g}),(0,a.jsx)("p",{className:"".concat(p.description," text-gold-300/80 ").concat(c?"animate-fade-in animation-delay-300":""),children:u}),(o||d)&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center pt-2 ".concat(c?"animate-fade-in animation-delay-400":""),children:[o&&(0,a.jsx)(f.A,{variant:o.variant||"primary",onClick:o.onClick,size:"sm"===i?"sm":"lg"===i?"lg":"md",children:o.label}),d&&(0,a.jsx)(f.A,{variant:"ghost",onClick:d.onClick,size:"sm"===i?"sm":"lg"===i?"lg":"md",children:d.label})]})]}),"success"===s&&(0,a.jsxs)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-green-500/10 rounded-full blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-green-500/10 rounded-full blur-3xl animate-pulse animation-delay-1000"})]}),"error"===s&&(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-red-500/5 rounded-full blur-3xl animate-pulse"})})]})}}},e=>{e.O(0,[3254,9051,7244,2528,1338,9760,1624,8441,5964,7358],()=>e(e.s=22762)),_N_E=e.O()}]);