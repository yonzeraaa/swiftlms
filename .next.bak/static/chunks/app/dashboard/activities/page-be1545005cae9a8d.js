(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6755],{12318:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},16314:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,dynamic:()=>v});var a=s(95155),l=s(12115),r=s(12318),c=s(65980),n=s(79397),i=s(69037),d=s(47924),o=s(69074),u=s(14186),h=s(79720),x=s(35494),m=s(60567),g=s(46414),p=s(30461);let v="force-dynamic";function f(){let[e,t]=(0,l.useState)(!0),{t:s}=(0,p.B)(),[v,f]=(0,l.useState)([]),[y,j]=(0,l.useState)([]),[b,N]=(0,l.useState)(""),[_,A]=(0,l.useState)("all"),[w,k]=(0,l.useState)({start:new Date(new Date().setDate(new Date().getDate()-7)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),C=(0,g.U)();(0,l.useEffect)(()=>{M()},[w]),(0,l.useEffect)(()=>{S()},[v,b,_]);let M=async()=>{try{t(!0);let{data:e,error:s}=await C.from("activity_logs").select("*").gte("created_at",w.start).lte("created_at","".concat(w.end,"T23:59:59")).order("created_at",{ascending:!1});if(s)return void console.error("Error fetching activities:",s);if(e&&e.length>0){let t=[...new Set(e.map(e=>e.user_id).filter(e=>null!==e))],{data:s}=await C.from("profiles").select("*").in("id",t),a=new Map((null==s?void 0:s.map(e=>[e.id,e]))||[]),l=e.map(e=>({...e,user:a.get(e.user_id)}));f(l)}else f([])}catch(e){console.error("Error fetching activities:",e)}finally{t(!1)}},S=()=>{let e=[...v];b&&(e=e.filter(e=>{var t,s;let a=(null==(t=e.user)?void 0:t.full_name)||(null==(s=e.user)?void 0:s.email)||"",l=e.entity_name||"",r=e.action||"";return a.toLowerCase().includes(b.toLowerCase())||l.toLowerCase().includes(b.toLowerCase())||r.toLowerCase().includes(b.toLowerCase())})),"all"!==_&&(e=e.filter(e=>e.action===_)),j(e)},D=[{value:"all",label:s("common.all")},{value:"user_created",label:s("activities.newUsers")},{value:"course_created",label:s("activities.coursesCreated")},{value:"course_published",label:s("activities.coursesPublished")},{value:"enrolled_in_course",label:s("activities.enrollments")},{value:"completed_course",label:s("activities.completions")}];return e?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,a.jsx)(m.A,{size:"xl"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.A,{className:"mb-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gold",children:s("activities.title")}),(0,a.jsx)("p",{className:"text-gold-300 mt-1",children:s("activities.subtitle")})]}),(0,a.jsx)(h.Ay,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gold-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:s("activities.searchPlaceholder"),value:b,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-500/50 focus:outline-none focus:ring-2 focus:ring-gold-500"})]})}),(0,a.jsx)("select",{value:_,onChange:e=>A(e.target.value),className:"px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500",children:D.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.A,{className:"w-5 h-5 text-gold-400"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsxs)("label",{className:"text-gold-300",children:[s("reports.dateRange"),":"]}),(0,a.jsx)("input",{type:"date",value:w.start,onChange:e=>k({...w,start:e.target.value}),className:"px-3 py-1 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500"}),(0,a.jsx)("span",{className:"text-gold-300",children:s("reports.to")}),(0,a.jsx)("input",{type:"date",value:w.end,onChange:e=>k({...w,end:e.target.value}),className:"px-3 py-1 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500"})]})]})]})}),(0,a.jsx)(h.Ay,{title:"".concat(s("activities.recentActivities")," (").concat(y.length,")"),children:(0,a.jsx)("div",{className:"space-y-4",children:y.length>0?y.map(e=>{var t,l;return(0,a.jsxs)("div",{className:"flex items-start gap-3 pb-4 border-b border-gold-500/20 last:border-0",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat((e=>{switch(e){case"user_created":return"bg-blue-500/20 text-blue-400";case"course_created":case"course_published":return"bg-green-500/20 text-green-400";case"enrolled_in_course":case"student_enrolled":return"bg-purple-500/20 text-purple-400";case"completed_course":return"bg-gold-500/20 text-gold-400";default:return"bg-gray-500/20 text-gray-400"}})(e.action)),children:(e=>{switch(e){case"user_created":return(0,a.jsx)(r.A,{className:"w-5 h-5"});case"course_created":case"course_published":return(0,a.jsx)(c.A,{className:"w-5 h-5"});case"enrolled_in_course":case"student_enrolled":default:return(0,a.jsx)(n.A,{className:"w-5 h-5"});case"completed_course":return(0,a.jsx)(i.A,{className:"w-5 h-5"})}})(e.action)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-gold-200",children:[(0,a.jsx)("span",{className:"font-semibold text-gold",children:(null==(t=e.user)?void 0:t.full_name)||(null==(l=e.user)?void 0:l.email)||"Unknown User"})," ",(e=>{switch(e){case"user_created":return s("dashboard.userJoined");case"course_created":return s("dashboard.createdCourse");case"course_published":return s("dashboard.publishedCourse");case"enrolled_in_course":return s("dashboard.enrolledInCourse");case"student_enrolled":return s("dashboard.newStudentEnrolled");case"completed_course":return s("dashboard.completedCourse");default:return e}})(e.action)]}),e.entity_name&&(0,a.jsx)("p",{className:"text-gold-400 text-sm mt-1",children:e.entity_name}),(0,a.jsxs)("p",{className:"text-gold-500/60 text-xs mt-2 flex items-center gap-1",children:[(0,a.jsx)(u.A,{className:"w-3 h-3"}),(e=>{let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/6e4);return a<60?"".concat(a," ").concat(s("dashboard.minutesAgo")):a<1440?"".concat(Math.floor(a/60)," ").concat(s("dashboard.hoursAgo")):a<10080?"".concat(Math.floor(a/1440)," ").concat(s("dashboard.daysAgo")):t.toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})(e.created_at)]})]})]},e.id)}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gold-300",children:s("activities.noActivities")})})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(h.Ay,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gold",children:y.length}),(0,a.jsx)("p",{className:"text-gold-300 mt-1",children:s("activities.totalActivities")})]})}),(0,a.jsx)(h.Ay,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gold",children:y.filter(e=>"user_created"===e.action).length}),(0,a.jsx)("p",{className:"text-gold-300 mt-1",children:s("activities.newUsers")})]})}),(0,a.jsx)(h.Ay,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gold",children:y.filter(e=>"enrolled_in_course"===e.action||"student_enrolled"===e.action).length}),(0,a.jsx)("p",{className:"text-gold-300 mt-1",children:s("activities.enrollments")})]})}),(0,a.jsx)(h.Ay,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gold",children:y.filter(e=>"completed_course"===e.action).length}),(0,a.jsx)("p",{className:"text-gold-300 mt-1",children:s("activities.completions")})]})})]})]})}},35494:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(95155),l=s(12115),r=s(6874),c=s.n(r),n=s(35695),i=s(13052),d=s(57340),o=s(38274);function u(e){let{items:t,separator:s=(0,a.jsx)(i.A,{className:"w-4 h-4 text-gold-600"}),showHome:r=!0,maxItems:u=5,className:h=""}=e,x=(0,n.usePathname)(),m=t||(()=>{let e=x.split("/").filter(Boolean),t=[];r&&t.push({label:"In\xedcio",href:"dashboard"===e[0]?"/dashboard":"/student-dashboard",icon:(0,a.jsx)(d.A,{className:"w-4 h-4"})});let s="";return e.forEach((a,l)=>{if(s+="/".concat(a),r&&0===l&&("dashboard"===a||"student-dashboard"===a))return;let c=a.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:c,href:l===e.length-1?void 0:s})}),t})(),g=m.length<=u?m:[m[0],{label:"...",href:void 0},...m.slice(-(u-2))];return(0,a.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 ".concat(h),children:g.map((e,t)=>(0,a.jsxs)(l.Fragment,{children:[t>0&&(0,a.jsx)("span",{className:"text-gold-600",children:s}),(0,a.jsx)(o.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center",children:e.href?(0,a.jsxs)(c(),{href:e.href,className:"flex items-center gap-1.5 text-sm font-medium text-gold-400 hover:text-gold-200 transition-colors",children:[e.icon,(0,a.jsx)("span",{children:e.label})]}):(0,a.jsxs)("span",{className:"flex items-center gap-1.5 text-sm font-medium text-gold-100","aria-current":"page",children:[e.icon,(0,a.jsx)("span",{children:e.label})]})})]},t))})}},47924:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},57340:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},65980:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("book-plus",[["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M9 10h6",key:"9gxzsh"}]])},69037:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},79397:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},94138:(e,t,s)=>{Promise.resolve().then(s.bind(s,16314))}},e=>{e.O(0,[3254,9051,7244,1338,9760,8441,5964,7358],()=>e(e.s=94138)),_N_E=e.O()}]);