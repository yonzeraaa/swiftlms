(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9242],{8195:(e,s,t)=>{Promise.resolve().then(t.bind(t,77557))},28360:(e,s,t)=>{"use strict";t.d(s,{ToastProvider:()=>o,d:()=>d});var l=t(95155),r=t(12115),a=t(13568);let n=(0,r.createContext)(void 0);function o(e){let{children:s}=e;return(0,l.jsxs)(n.Provider,{value:{showToast:e=>{e.toLowerCase().includes("erro")||e.toLowerCase().includes("error")?a.oR.error(e):e.toLowerCase().includes("sucesso")||e.toLowerCase().includes("success")?a.oR.success(e):(0,a.oR)(e)}},children:[s,(0,l.jsx)(a.l$,{position:"top-right",toastOptions:{style:{background:"#003366",color:"#FFD700",border:"2px solid #FFD700"},success:{style:{background:"#003366",color:"#FFD700",border:"2px solid #FFD700"}},error:{style:{background:"#8B0000",color:"#FFD700",border:"2px solid #FFD700"}}}})]})}function d(){let e=(0,r.useContext)(n);return e||{showToast:e=>{e.toLowerCase().includes("erro")||e.toLowerCase().includes("error")?a.oR.error(e):e.toLowerCase().includes("sucesso")||e.toLowerCase().includes("success")?a.oR.success(e):(0,a.oR)(e)}}}},35494:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var l=t(95155),r=t(12115),a=t(6874),n=t.n(a),o=t(35695),d=t(13052),c=t(57340),i=t(38274);function x(e){let{items:s,separator:t=(0,l.jsx)(d.A,{className:"w-4 h-4 text-gold-600"}),showHome:a=!0,maxItems:x=5,className:u=""}=e,m=(0,o.usePathname)(),h=s||(()=>{let e=m.split("/").filter(Boolean),s=[];a&&s.push({label:"In\xedcio",href:"dashboard"===e[0]?"/dashboard":"/student-dashboard",icon:(0,l.jsx)(c.A,{className:"w-4 h-4"})});let t="";return e.forEach((l,r)=>{if(t+="/".concat(l),a&&0===r&&("dashboard"===l||"student-dashboard"===l))return;let n=l.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");s.push({label:n,href:r===e.length-1?void 0:t})}),s})(),g=h.length<=x?h:[h[0],{label:"...",href:void 0},...h.slice(-(x-2))];return(0,l.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 ".concat(u),children:g.map((e,s)=>(0,l.jsxs)(r.Fragment,{children:[s>0&&(0,l.jsx)("span",{className:"text-gold-600",children:t}),(0,l.jsx)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*s},className:"flex items-center",children:e.href?(0,l.jsxs)(n(),{href:e.href,className:"flex items-center gap-1.5 text-sm font-medium text-gold-400 hover:text-gold-200 transition-colors",children:[e.icon,(0,l.jsx)("span",{children:e.label})]}):(0,l.jsxs)("span",{className:"flex items-center gap-1.5 text-sm font-medium text-gold-100","aria-current":"page",children:[e.icon,(0,l.jsx)("span",{children:e.label})]})})]},s))})}},40160:(e,s,t)=>{"use strict";t.d(s,{Ay:()=>a,vu:()=>n});var l=t(95155),r=t(54416);function a(e){let{children:s,variant:t="default",size:a="md",removable:n=!1,onRemove:o,icon:d,className:c="",animate:i=!1}=e;return(0,l.jsxs)("span",{className:"\n        inline-flex items-center gap-1.5 rounded-full font-medium\n        transition-all duration-300\n        ".concat({default:"bg-navy-700/50 text-gold-300 border border-gold-500/20",success:"bg-green-500/20 text-green-400 border border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30",error:"bg-red-500/20 text-red-400 border border-red-500/30",info:"bg-blue-500/20 text-blue-400 border border-blue-500/30",gradient:"bg-gradient-to-r from-purple-500/20 via-gold-500/20 to-gold-600/20 text-gold-300 border border-gold-500/30"}[t],"\n        ").concat({sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"}[a],"\n        ").concat(i?"animate-pulse":"","\n        hover:scale-105 hover:shadow-lg\n        ").concat(c,"\n      "),children:[d&&(0,l.jsx)("span",{className:"transition-transform hover:rotate-12",children:d}),s,n&&(0,l.jsx)("button",{onClick:o,className:"ml-1 -mr-1 hover:text-gold-100 transition-colors",children:(0,l.jsx)(r.A,{className:"w-3 h-3"})})]})}function n(e){let{label:s,selected:t=!1,onClick:r,count:a,icon:n,color:o="gold"}=e,d={gold:{base:"border-gold-500/30 text-gold-400",selected:"bg-gold-500/20 border-gold-500 text-gold-200",hover:"hover:border-gold-500/50 hover:bg-gold-500/10"},blue:{base:"border-blue-500/30 text-blue-400",selected:"bg-blue-500/20 border-blue-500 text-blue-200",hover:"hover:border-blue-500/50 hover:bg-blue-500/10"},green:{base:"border-green-500/30 text-green-400",selected:"bg-green-500/20 border-green-500 text-green-200",hover:"hover:border-green-500/50 hover:bg-green-500/10"},purple:{base:"border-purple-500/30 text-purple-400",selected:"bg-purple-500/20 border-purple-500 text-purple-200",hover:"hover:border-purple-500/50 hover:bg-purple-500/10"},red:{base:"border-red-500/30 text-red-400",selected:"bg-red-500/20 border-red-500 text-red-200",hover:"hover:border-red-500/50 hover:bg-red-500/10"}}[o];return(0,l.jsxs)("button",{onClick:r,className:"\n        inline-flex items-center gap-2 px-4 py-2 rounded-full\n        font-medium text-sm border transition-all duration-300\n        ".concat(t?d.selected:"".concat(d.base," ").concat(d.hover),"\n        transform hover:scale-105 active:scale-95\n      "),children:[n&&(0,l.jsx)("span",{className:"transition-transform ".concat(t?"rotate-12":""),children:n}),s,void 0!==a&&(0,l.jsx)("span",{className:"\n          ml-1 px-1.5 py-0.5 rounded-full text-xs font-bold\n          ".concat(t?"bg-white/20":"bg-current/10","\n        "),children:a})]})}},77557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>X,dynamic:()=>K});var l=t(95155),r=t(12115),a=t(6874),n=t.n(a),o=t(17580),d=t(84616),c=t(47924),i=t(66932),x=t(75525),u=t(87949),m=t(5040),h=t(5196),g=t(82788),p=t(28883),f=t(19420),b=t(44020),j=t(13717),v=t(57434),N=t(69803),w=t(85690),y=t(62525),A=t(54416),C=t(85339),k=t(12318),_=t(79720),z=t(35494),S=t(767),F=t(46414),L=t(30461),E=t(71007),D=t(81191),U=t(33109),P=t(69037),T=t(69074),R=t(32919),q=t(50430),B=t(40160);function I(e){let{children:s,content:t,position:a="top",delay:n=300,className:o=""}=e,[d,c]=(0,r.useState)(!1),[i,x]=(0,r.useState)({top:0,left:0}),u=(0,r.useRef)(null),m=(0,r.useRef)(null),h=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(d&&m.current&&h.current){let e=m.current.getBoundingClientRect(),s=h.current.getBoundingClientRect(),t=0,l=0;switch(a){case"top":t=e.top-s.height-8,l=e.left+(e.width-s.width)/2;break;case"bottom":t=e.bottom+8,l=e.left+(e.width-s.width)/2;break;case"left":t=e.top+(e.height-s.height)/2,l=e.left-s.width-8;break;case"right":t=e.top+(e.height-s.height)/2,l=e.right+8}let r=window.innerWidth,n=window.innerHeight;l<8&&(l=8),l+s.width>r-8&&(l=r-s.width-8),t<8&&(t=8),t+s.height>n-8&&(t=n-s.height-8),x({top:t,left:l})}},[d,a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:m,onMouseEnter:()=>{u.current=setTimeout(()=>{c(!0)},n)},onMouseLeave:()=>{u.current&&clearTimeout(u.current),c(!1)},className:"inline-block",children:s}),d&&(0,l.jsx)("div",{ref:h,style:{position:"fixed",top:"".concat(i.top,"px"),left:"".concat(i.left,"px"),zIndex:9999},className:"\n            pointer-events-none\n            animate-in fade-in zoom-in-95\n            ".concat(o,"\n          "),children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:" bg-navy-800 text-gold-100  px-3 py-2 rounded-lg text-sm font-medium shadow-xl border border-gold-500/20 max-w-xs ",children:t}),(0,l.jsx)("div",{className:(()=>{let e="absolute w-0 h-0 border-solid",s="border-[6px]";switch(a){case"top":return"".concat(e," ").concat(s," -bottom-3 left-1/2 -translate-x-1/2 border-t-navy-800 border-x-transparent border-b-transparent");case"bottom":return"".concat(e," ").concat(s," -top-3 left-1/2 -translate-x-1/2 border-b-navy-800 border-x-transparent border-t-transparent");case"left":return"".concat(e," ").concat(s," -right-3 top-1/2 -translate-y-1/2 border-l-navy-800 border-y-transparent border-r-transparent");case"right":return"".concat(e," ").concat(s," -left-3 top-1/2 -translate-y-1/2 border-r-navy-800 border-y-transparent border-l-transparent");default:return""}})()})]})})]})}var M=t(34076),V=t(4573);function O(e){var s,t,r,a,n;let{user:d,onEdit:c,onToggleActive:i,onDelete:h}=e,g="student"===d.role?(e=>{if(!e||0===e.length)return 0;let s=e.filter(e=>"completed"===e.status&&e.score);return 0===s.length?0:Math.round(s.reduce((e,s)=>e+(s.score||0),0)/s.length)})(d.test_attempts):0,p=(null==(s=d.test_attempts)?void 0:s.length)||0,f=(null==(t=d.courses)?void 0:t.length)||(null==(r=d.enrollments)?void 0:r.length)||0,b=(null==(a=d.tests_created)?void 0:a.length)||0,v=d.full_name?d.full_name.split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase():d.email.slice(0,2).toUpperCase(),N=d.email.charCodeAt(0)%5;return(0,l.jsxs)(_.Ay,{variant:"elevated",hoverable:!0,className:"group relative overflow-hidden",children:[(0,l.jsx)("div",{className:"absolute top-4 right-4 z-10",children:(0,l.jsx)(B.Ay,{variant:d.is_active?"success":"error",size:"sm",animate:!d.is_active,children:d.is_active?"Ativo":"Inativo"})}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,l.jsx)("div",{className:"w-14 h-14 rounded-full ".concat(["bg-gradient-to-br from-purple-500 to-purple-600","bg-gradient-to-br from-blue-500 to-blue-600","bg-gradient-to-br from-green-500 to-green-600","bg-gradient-to-br from-orange-500 to-orange-600","bg-gradient-to-br from-pink-500 to-pink-600"][N]," flex items-center justify-center text-white font-bold text-lg shadow-lg"),children:v}),(0,l.jsxs)("div",{className:"flex-1 pr-16",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-gold line-clamp-1 group-hover:text-gold-300 transition-colors",children:d.full_name||"Usu\xe1rio sem nome"}),(0,l.jsx)("p",{className:"text-sm text-gold-400 line-clamp-1",children:d.email})]})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(B.Ay,{variant:"admin"===d.role?"gradient":"student"===d.role?"success":"info",size:"md",icon:(e=>{switch(e){case"admin":return(0,l.jsx)(x.A,{className:"w-4 h-4"});case"teacher":case"instructor":return(0,l.jsx)(u.A,{className:"w-4 h-4"});case"student":return(0,l.jsx)(m.A,{className:"w-4 h-4"});default:return(0,l.jsx)(E.A,{className:"w-4 h-4"})}})(d.role),children:(e=>{switch(e){case"admin":return"Administrador";case"teacher":case"instructor":return"Professor";case"student":return"Aluno";default:return e}})(d.role)})}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:"student"===d.role?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(m.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Cursos"})]}),(0,l.jsx)("p",{className:"text-xl font-bold text-gold",children:f})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(D.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Tentativas"})]}),(0,l.jsx)("p",{className:"text-xl font-bold text-gold",children:p})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(U.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"M\xe9dia"})]}),(0,l.jsx)("p",{className:"text-sm font-medium ".concat(g>=70?"text-green-400":g>=50?"text-yellow-400":p>0?"text-red-400":"text-gold-500"),children:p>0?"".concat(g,"%"):"-"})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(P.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Aprova\xe7\xf5es"})]}),(0,l.jsx)("p",{className:"text-sm font-medium text-gold",children:(null==(n=d.test_attempts)?void 0:n.filter(e=>"completed"===e.status&&(e.score||0)>=70).length)||0})]})]}):"teacher"===d.role||"instructor"===d.role?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(m.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Cursos"})]}),(0,l.jsx)("p",{className:"text-xl font-bold text-gold",children:f})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(D.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Testes"})]}),(0,l.jsx)("p",{className:"text-xl font-bold text-gold",children:b})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3 col-span-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(o.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Alunos"})]}),(0,l.jsx)("p",{className:"text-sm text-gold-300",children:"Ver detalhes dos cursos"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(o.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Total Usu\xe1rios"})]}),(0,l.jsx)("p",{className:"text-sm text-gold-300",children:"Acesso completo"})]}),(0,l.jsxs)("div",{className:"bg-navy-900/30 rounded-lg p-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)(x.A,{className:"w-4 h-4 text-gold-500"}),(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Permiss\xf5es"})]}),(0,l.jsx)("p",{className:"text-sm text-gold-300",children:"Todas"})]})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gold-400 mb-4",children:[(0,l.jsx)(T.A,{className:"w-3 h-3"}),(0,l.jsxs)("span",{children:["Membro h\xe1 ",(0,M.m)(new Date(d.created_at),{addSuffix:!1,locale:V.F})]})]}),"student"===d.role&&p>0&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,l.jsx)("span",{className:"text-xs text-gold-400",children:"Taxa de Sucesso"}),(0,l.jsxs)("span",{className:"text-xs text-gold-300",children:[g,"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-navy-900/50 rounded-full h-2 overflow-hidden",children:(0,l.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(g>=70?"bg-gradient-to-r from-green-500 to-green-400":g>=50?"bg-gradient-to-r from-yellow-500 to-yellow-400":"bg-gradient-to-r from-red-500 to-red-400"),style:{width:"".concat(g,"%")}})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 pt-4 border-t border-gold-500/10",children:[(0,l.jsx)(S.A,{variant:"ghost",size:"sm",onClick:c,icon:(0,l.jsx)(j.A,{className:"w-4 h-4"}),children:"Editar"}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(I,{content:d.is_active?"Desativar":"Ativar",children:(0,l.jsx)("button",{onClick:i,className:"p-2 text-gold-400 hover:text-gold-200 hover:bg-gold-500/10 rounded-lg transition-all",children:d.is_active?(0,l.jsx)(R.A,{className:"w-4 h-4"}):(0,l.jsx)(q.A,{className:"w-4 h-4"})})}),(0,l.jsx)(I,{content:"Excluir",children:(0,l.jsx)("button",{onClick:h,className:"p-2 text-red-400 hover:text-red-200 hover:bg-red-500/10 rounded-lg transition-all",children:(0,l.jsx)(y.A,{className:"w-4 h-4"})})})]})]}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-gold-500/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})}var W=t(14541),G=t(15968);function H(e){let{view:s,onViewChange:t}=e;return(0,l.jsxs)("div",{className:"flex items-center bg-navy-800/50 rounded-lg p-1 border border-gold-500/20",children:[(0,l.jsx)(I,{content:"Visualiza\xe7\xe3o em Grade",children:(0,l.jsx)("button",{onClick:()=>t("grid"),className:"\n            p-2 rounded transition-all duration-200\n            ".concat("grid"===s?"bg-gold-500/20 text-gold-300":"text-gold-500 hover:text-gold-300 hover:bg-gold-500/10","\n          "),children:(0,l.jsx)(W.A,{className:"w-4 h-4"})})}),(0,l.jsx)(I,{content:"Visualiza\xe7\xe3o em Lista",children:(0,l.jsx)("button",{onClick:()=>t("list"),className:"\n            p-2 rounded transition-all duration-200\n            ".concat("list"===s?"bg-gold-500/20 text-gold-300":"text-gold-500 hover:text-gold-300 hover:bg-gold-500/10","\n          "),children:(0,l.jsx)(G.A,{className:"w-4 h-4"})})})]})}var $=t(38758),J=t(28360);let K="force-dynamic",Q=e=>{let s=e.replace(/\D/g,"").slice(0,11);return s.length<=2?s:s.length<=7?"(".concat(s.slice(0,2),") ").concat(s.slice(2)):s.length<=10?"(".concat(s.slice(0,2),") ").concat(s.slice(2,6),"-").concat(s.slice(6)):"(".concat(s.slice(0,2),") ").concat(s.slice(2,7),"-").concat(s.slice(7))};function X(){let[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)([]),[E,D]=(0,r.useState)(!0),[U,P]=(0,r.useState)(!1),[T,R]=(0,r.useState)("list"),[q,I]=(0,r.useState)(!1),[M,V]=(0,r.useState)("all"),[W,G]=(0,r.useState)("all"),{t:K}=(0,L.B)(),{showToast:X}=(0,J.d)(),[Y,Z]=(0,r.useState)({email:"",password:"",full_name:"",phone:"",role:"student"}),[ee,es]=(0,r.useState)(!1),[et,el]=(0,r.useState)(null),[er,ea]=(0,r.useState)(null),[en,eo]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(!1),[ei,ex]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(null),[eh,eg]=(0,r.useState)({full_name:"",phone:"",role:"student"}),[ep,ef]=(0,r.useState)(""),[eb,ej]=(0,r.useState)(!1),ev=(0,F.U)();(0,r.useEffect)(()=>{let e=localStorage.getItem("usersViewMode");("grid"===e||"list"===e)&&R(e),eN()},[]),(0,r.useEffect)(()=>{localStorage.setItem("usersViewMode",T)},[T]),(0,r.useEffect)(()=>{let e=e=>{er&&!e.target.closest(".dropdown-menu")&&ea(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[er]);let eN=async()=>{try{let{data:e,error:s}=await ev.from("profiles").select("*").order("created_at",{ascending:!1});if(s)throw s;let t=await Promise.all((e||[]).map(async e=>{if("student"===e.role){let{data:s}=await ev.from("enrollments").select("id").eq("user_id",e.id);return{...e,enrollments:s||[]}}if("instructor"===e.role||"teacher"===e.role){let{data:s}=await ev.from("courses").select("id, title").eq("instructor_id",e.id),{data:t}=await ev.from("tests").select("id").eq("created_by",e.id);return{...e,courses:s||[],tests_created:t||[]}}return e}));a(t)}catch(e){console.error("Error fetching users:",e),X("Erro ao carregar usu\xe1rios")}finally{D(!1)}},ew=async()=>{es(!0),el(null);try{let{data:e,error:s}=await ev.auth.signUp({email:Y.email,password:Y.password,options:{data:{full_name:Y.full_name,role:Y.role}}});if(s)throw s;if(e.user){let{error:s}=await ev.from("profiles").update({full_name:Y.full_name,phone:Y.phone,role:Y.role}).eq("id",e.user.id);if(s)throw s}Z({email:"",password:"",full_name:"",phone:"",role:"student"}),P(!1),eN()}catch(e){el(e.message||K("users.error"))}finally{es(!1)}},ey=async(e,s)=>{try{let{error:l}=await ev.from("profiles").update({status:s}).eq("id",e);if(l)throw l;a(t.map(t=>t.id===e?{...t,status:s}:t)),X("active"===s?"Usu\xe1rio ativado":"Usu\xe1rio desativado"),ea(null)}catch(e){console.error("Error updating user status:",e),X("Erro ao atualizar status")}},eA=e=>{em(e),eg({full_name:e.full_name||"",phone:e.phone||"",role:e.role||"student"}),eo(!0),ea(null)},eC=async()=>{if(eu){ej(!0),el(null);try{let{error:e}=await ev.from("profiles").update({full_name:eh.full_name,phone:eh.phone,role:eh.role}).eq("id",eu.id);if(e)throw e;a(t.map(e=>e.id===eu.id?{...e,full_name:eh.full_name,phone:eh.phone,role:eh.role}:e)),eo(!1),em(null)}catch(e){el(e.message||K("users.error"))}finally{ej(!1)}}},ek=async()=>{if(eu&&ep){ej(!0),el(null);try{alert("".concat(K("users.newPassword"),": ").concat(ep,"\n\n").concat(K("common.note"),": ").concat(K("users.passwordResetNote"))),ec(!1),em(null),ef("")}catch(e){el(e.message||K("users.error"))}finally{ej(!1)}}},e_=e=>{em(e),ex(!0),ea(null)},ez=async()=>{if(eu){ej(!0),el(null);try{var e;let s=await fetch("/api/users/".concat(eu.id),{method:"DELETE"}),l=await s.json();if(!s.ok)throw Error(l.error||"Failed to delete user");a(t.filter(e=>e.id!==eu.id)),ex(!1),em(null),alert(K("users.userDeleted")),await ev.from("activity_logs").insert({user_id:null==(e=(await ev.auth.getUser()).data.user)?void 0:e.id,action:"user_deleted",entity_type:"user",entity_id:eu.id,entity_name:eu.full_name||eu.email,metadata:{deletedUserEmail:eu.email}})}catch(e){el(e.message||K("users.error"))}finally{ej(!1)}}},eS=t.filter(s=>{var t;let l=(null==(t=s.full_name)?void 0:t.toLowerCase().includes(e.toLowerCase()))||s.email.toLowerCase().includes(e.toLowerCase()),r="all"===M||s.role===M,a="all"===W||("active"===W?"frozen"!==s.status:"frozen"===s.status);return l&&r&&a});return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(z.A,{className:"mb-2"}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[(0,l.jsx)(o.A,{className:"w-8 h-8 text-gold-400"}),K("users.title")]}),(0,l.jsx)("p",{className:"text-gold-300 mt-1",children:K("users.subtitle")})]}),(0,l.jsx)(S.A,{variant:"primary",icon:(0,l.jsx)(d.A,{className:"w-5 h-5"}),onClick:()=>P(!0),children:K("users.newUser")})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gold-400"}),(0,l.jsx)("input",{type:"text",placeholder:K("users.searchPlaceholder"),value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-navy-900/50 border border-gold-500/20 rounded-lg text-gold-100 placeholder-gold-400 focus:outline-none focus:ring-2 focus:ring-gold-500/50"})]}),(0,l.jsx)(H,{view:T,onViewChange:R}),(0,l.jsx)(S.A,{variant:"secondary",icon:(0,l.jsx)(i.A,{className:"w-5 h-5"}),onClick:()=>I(!q),children:K("users.filters")})]}),q&&(0,l.jsx)(_.Ay,{variant:"outlined",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gold-300 mb-3",children:"Fun\xe7\xe3o"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(B.vu,{label:"Todos",selected:"all"===M,onClick:()=>V("all"),count:t.length}),(0,l.jsx)(B.vu,{label:"Administrador",selected:"admin"===M,onClick:()=>V("admin"),icon:(0,l.jsx)(x.A,{className:"w-4 h-4"}),count:t.filter(e=>"admin"===e.role).length,color:"purple"}),(0,l.jsx)(B.vu,{label:"Professor",selected:"instructor"===M||"teacher"===M,onClick:()=>V("instructor"),icon:(0,l.jsx)(u.A,{className:"w-4 h-4"}),count:t.filter(e=>"instructor"===e.role||"teacher"===e.role).length,color:"blue"}),(0,l.jsx)(B.vu,{label:"Aluno",selected:"student"===M,onClick:()=>V("student"),icon:(0,l.jsx)(m.A,{className:"w-4 h-4"}),count:t.filter(e=>"student"===e.role).length,color:"green"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gold-300 mb-3",children:"Status"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(B.vu,{label:"Todos",selected:"all"===W,onClick:()=>G("all")}),(0,l.jsx)(B.vu,{label:"Ativo",selected:"active"===W,onClick:()=>G("active"),icon:(0,l.jsx)(h.A,{className:"w-4 h-4"}),count:t.filter(e=>"frozen"!==e.status).length,color:"green"}),(0,l.jsx)(B.vu,{label:"Inativo",selected:"frozen"===W,onClick:()=>G("frozen"),icon:(0,l.jsx)(g.A,{className:"w-4 h-4"}),count:t.filter(e=>"frozen"===e.status).length,color:"blue"})]})]}),("all"!==M||"all"!==W)&&(0,l.jsx)("div",{className:"flex justify-end pt-2",children:(0,l.jsx)(S.A,{variant:"ghost",size:"sm",onClick:()=>{V("all"),G("all")},children:"Limpar Filtros"})})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsx)(_.Ay,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gold-300 text-sm",children:"Total de Usu\xe1rios"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gold mt-1",children:t.length})]}),(0,l.jsx)(o.A,{className:"w-8 h-8 text-gold-500/30"})]})}),(0,l.jsx)(_.Ay,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gold-300 text-sm",children:"Administradores"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gold mt-1",children:t.filter(e=>"admin"===e.role).length})]}),(0,l.jsx)(x.A,{className:"w-8 h-8 text-purple-500/30"})]})}),(0,l.jsx)(_.Ay,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gold-300 text-sm",children:"Professores"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gold mt-1",children:t.filter(e=>"instructor"===e.role||"teacher"===e.role).length})]}),(0,l.jsx)(u.A,{className:"w-8 h-8 text-blue-500/30"})]})}),(0,l.jsx)(_.Ay,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gold-300 text-sm",children:"Alunos"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-gold mt-1",children:t.filter(e=>"student"===e.role).length})]}),(0,l.jsx)(m.A,{className:"w-8 h-8 text-green-500/30"})]})})]}),E?(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,l.jsx)($.u4,{},s))})}):"grid"===T?(0,l.jsxs)(l.Fragment,{children:[eS.length>0&&(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("p",{className:"text-sm text-gold-400",children:[eS.length," ",1===eS.length?"usu\xe1rio encontrado":"usu\xe1rios encontrados"]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:eS.map(e=>{var s;return(0,l.jsx)(O,{user:{...e,full_name:null!=(s=e.full_name)?s:void 0,created_at:e.created_at||new Date().toISOString(),role:e.role||"student",is_active:"frozen"!==e.status},onEdit:()=>eA(e),onToggleActive:()=>ey(e.id,"frozen"===e.status?"active":"frozen"),onDelete:()=>e_(e)},e.id)})}),0===eS.length&&(0,l.jsxs)(_.Ay,{variant:"outlined",className:"text-center py-12",children:[(0,l.jsx)(o.A,{className:"w-16 h-16 text-gold-500/30 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gold mb-2",children:"Nenhum usu\xe1rio encontrado"}),(0,l.jsx)("p",{className:"text-gold-400 mb-6",children:e||"all"!==M||"all"!==W?"Tente ajustar os filtros ou termo de busca":"Comece adicionando seu primeiro usu\xe1rio"}),!(e||"all"!==M||"all"!==W)&&(0,l.jsx)(S.A,{variant:"primary",icon:(0,l.jsx)(d.A,{className:"w-5 h-5"}),onClick:()=>P(!0),children:"Adicionar Primeiro Usu\xe1rio"})]})]}):(0,l.jsx)(_.Ay,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"overflow-x-auto table-sticky",children:(0,l.jsxs)("table",{className:"w-full table-density density-compact",children:[(0,l.jsx)("thead",{className:"bg-navy-800/80 backdrop-blur-sm sticky top-0 z-10",children:(0,l.jsxs)("tr",{className:"border-b border-gold-500/20",children:[(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.name")}),(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.contact")}),(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.role")}),(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.status")}),(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.createdAt")}),(0,l.jsx)("th",{scope:"col",className:"text-left text-gold-300 font-medium",children:K("users.actions")})]})}),(0,l.jsx)("tbody",{children:0===eS.length?(0,l.jsx)("tr",{children:(0,l.jsxs)("td",{colSpan:6,className:"py-12 text-center",children:[(0,l.jsx)(o.A,{className:"w-12 h-12 text-gold-500/30 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-gold-300",children:e||"all"!==M||"all"!==W?"Nenhum usu\xe1rio encontrado com os filtros atuais":"Nenhum usu\xe1rio cadastrado"})]})}):eS.map(e=>(0,l.jsxs)("tr",{className:"border-b border-gold-500/10 hover:bg-navy-700/20",children:[(0,l.jsx)("td",{children:(0,l.jsx)("p",{className:"font-medium text-gold",children:e.full_name||K("users.noName")})}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"text-gold-200 text-sm flex items-center gap-1",children:[(0,l.jsx)(p.A,{className:"w-3 h-3"}),e.email]}),e.phone&&(0,l.jsxs)("p",{className:"text-gold-300 text-sm flex items-center gap-1",children:[(0,l.jsx)(f.A,{className:"w-3 h-3"}),e.phone]})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"admin":return"bg-purple-500/20 text-purple-400";case"instructor":return"bg-blue-500/20 text-blue-400";default:return"bg-gold-500/20 text-gold-400"}})(e.role)),children:(e=>{switch(e){case"admin":return K("users.administrator");case"instructor":return K("users.instructor");case"student":return K("users.student");default:return e||K("users.noRole")}})(e.role)})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("frozen"===e.status?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"),children:"frozen"===e.status?K("users.frozen"):K("users.active")})}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{className:"text-gold-300 text-sm",children:e.created_at?new Date(e.created_at).toLocaleDateString("pt-BR"):"-"})}),(0,l.jsxs)("td",{className:"relative",children:[(0,l.jsx)("button",{className:"text-gold-400 hover:text-gold-200 transition-colors p-1","aria-label":"Abrir menu de a\xe7\xf5es do usu\xe1rio",onClick:()=>ea(er===e.id?null:e.id),children:(0,l.jsx)(b.A,{className:"w-5 h-5"})}),er===e.id&&(0,l.jsxs)("div",{className:"dropdown-menu absolute right-0 mt-2 w-48 bg-navy-800 border border-gold-500/20 rounded-lg shadow-lg z-10",children:[(0,l.jsxs)("button",{onClick:()=>eA(e),className:"w-full px-4 py-2 text-left text-gold-200 hover:bg-navy-700 flex items-center gap-2 rounded-t-lg",children:[(0,l.jsx)(j.A,{className:"w-4 h-4"}),K("users.edit")]}),"student"===e.role&&(0,l.jsxs)(n(),{href:"/dashboard/users/".concat(e.id,"/grades"),onClick:()=>ea(null),className:"w-full px-4 py-2 text-left text-gold-200 hover:bg-navy-700 flex items-center gap-2 block",children:[(0,l.jsx)(v.A,{className:"w-4 h-4"}),"Ver Notas"]}),(0,l.jsxs)("button",{onClick:()=>{em(e),ef(""),ec(!0),ea(null)},className:"w-full px-4 py-2 text-left text-gold-200 hover:bg-navy-700 flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"w-4 h-4"}),K("users.resetPassword")]}),"frozen"===e.status?(0,l.jsxs)("button",{onClick:()=>ey(e.id,"active"),className:"w-full px-4 py-2 text-left text-green-400 hover:bg-navy-700 flex items-center gap-2",children:[(0,l.jsx)(w.A,{className:"w-4 h-4"}),K("users.unfreeze")]}):(0,l.jsxs)("button",{onClick:()=>ey(e.id,"frozen"),className:"w-full px-4 py-2 text-left text-blue-400 hover:bg-navy-700 flex items-center gap-2",children:[(0,l.jsx)(g.A,{className:"w-4 h-4"}),K("users.freeze")]}),(0,l.jsxs)("button",{onClick:()=>e_(e),className:"w-full px-4 py-2 text-left text-red-400 hover:bg-navy-700 flex items-center gap-2 rounded-b-lg",children:[(0,l.jsx)(y.A,{className:"w-4 h-4"}),K("users.delete")]})]})]})]},e.id))})]})}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-6 border-t border-gold-500/20",children:[(0,l.jsxs)("p",{className:"text-gold-300 text-sm",children:[K("common.showing")," ",eS.length," ",K("common.of")," ",t.length," ",K("users.title").toLowerCase()]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(S.A,{variant:"secondary",size:"sm",children:K("button.previous")}),(0,l.jsx)(S.A,{variant:"secondary",size:"sm",children:K("button.next")})]})]})]})}),en&&eu&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)(_.Ay,{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-gold flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"w-6 h-6"}),K("users.editUser")]}),(0,l.jsx)("button",{onClick:()=>eo(!1),className:"text-gold-400 hover:text-gold-200 transition-colors","aria-label":"Fechar modal de edi\xe7\xe3o",children:(0,l.jsx)(A.A,{className:"w-5 h-5"})})]}),et&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:et})}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),eC()},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.fullName")}),(0,l.jsx)("input",{type:"text",value:eh.full_name,onChange:e=>eg({...eh,full_name:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.email")}),(0,l.jsx)("input",{type:"email",value:eu.email,className:"w-full px-4 py-2 bg-navy-900/30 border border-navy-600 rounded-lg text-gold-300 cursor-not-allowed",disabled:!0}),(0,l.jsx)("p",{className:"text-xs text-gold-300 mt-1",children:K("settings.emailCannotChange")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.phone")}),(0,l.jsx)("input",{type:"tel",value:eh.phone,onChange:e=>eg({...eh,phone:Q(e.target.value)}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",placeholder:"(21) 98765-4321",maxLength:15})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.role")}),(0,l.jsxs)("select",{value:eh.role,onChange:e=>eg({...eh,role:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",children:[(0,l.jsx)("option",{value:"student",children:K("users.student")}),(0,l.jsx)("option",{value:"instructor",children:K("users.instructor")}),(0,l.jsx)("option",{value:"admin",children:K("users.administrator")})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)(S.A,{type:"button",variant:"secondary",onClick:()=>eo(!1),className:"flex-1",children:K("button.cancel")}),(0,l.jsx)(S.A,{type:"submit",variant:"primary",disabled:eb,className:"flex-1",children:eb?K("users.updating"):K("button.save")})]})]})]})}),ed&&eu&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)(_.Ay,{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-gold flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"w-6 h-6"}),K("users.resetPassword")]}),(0,l.jsx)("button",{onClick:()=>ec(!1),className:"text-gold-400 hover:text-gold-200 transition-colors",children:(0,l.jsx)(A.A,{className:"w-5 h-5"})})]}),et&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:et})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("p",{className:"text-gold-200",children:[K("users.user"),": ",(0,l.jsx)("span",{className:"font-medium text-gold",children:eu.full_name||eu.email})]}),(0,l.jsx)("p",{className:"text-gold-300 text-sm mt-1",children:K("users.newPasswordWillBeSet")})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),ek()},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.newPassword")}),(0,l.jsx)("input",{type:"password",value:ep,onChange:e=>ef(e.target.value),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent",required:!0,minLength:6}),(0,l.jsx)("p",{className:"text-xs text-gold-300 mt-1",children:K("settings.minCharacters")})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)(S.A,{type:"button",variant:"secondary",onClick:()=>ec(!1),className:"flex-1",children:K("button.cancel")}),(0,l.jsx)(S.A,{type:"submit",variant:"primary",disabled:eb,className:"flex-1",children:eb?K("common.loading"):K("users.resetPassword")})]})]})]})}),ei&&eu&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)(_.Ay,{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-red-400 flex items-center gap-2",children:[(0,l.jsx)(C.A,{className:"w-6 h-6"}),K("users.deleteUser")]}),(0,l.jsx)("button",{onClick:()=>ex(!1),className:"text-gold-400 hover:text-gold-200 transition-colors","aria-label":"Fechar modal de exclus\xe3o",children:(0,l.jsx)(A.A,{className:"w-5 h-5"})})]}),et&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:et})}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("p",{className:"text-gold-200 mb-2",children:K("users.confirmDelete")}),(0,l.jsxs)("div",{className:"bg-navy-900/50 p-3 rounded-lg",children:[(0,l.jsx)("p",{className:"text-gold font-medium",children:eu.full_name||K("users.noName")}),(0,l.jsx)("p",{className:"text-gold-300 text-sm",children:eu.email})]}),(0,l.jsxs)("p",{className:"text-red-400 text-sm mt-3",children:["⚠️ ",K("users.deleteWarning")]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(S.A,{type:"button",variant:"secondary",onClick:()=>ex(!1),className:"flex-1",children:K("button.cancel")}),(0,l.jsx)(S.A,{type:"button",variant:"primary",onClick:ez,disabled:eb,className:"flex-1 bg-red-500 hover:bg-red-600",children:eb?K("users.deleting"):K("users.deleteUser")})]})]})}),U&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)(_.Ay,{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-gold flex items-center gap-2",children:[(0,l.jsx)(k.A,{className:"w-6 h-6"}),K("users.newUser")]}),(0,l.jsx)("button",{onClick:()=>P(!1),className:"text-gold-400 hover:text-gold-200 transition-colors","aria-label":"Fechar modal de novo usu\xe1rio",children:(0,l.jsx)(A.A,{className:"w-5 h-5"})})]}),et&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:et})}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),ew()},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.fullName")}),(0,l.jsx)("input",{type:"text",value:Y.full_name,onChange:e=>Z({...Y,full_name:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.email")}),(0,l.jsx)("input",{type:"email",value:Y.email,onChange:e=>Z({...Y,email:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",placeholder:"usuario@exemplo.com",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.phone")}),(0,l.jsx)("input",{type:"tel",value:Y.phone,onChange:e=>Z({...Y,phone:Q(e.target.value)}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",placeholder:"(21) 98765-4321",maxLength:15})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.password")}),(0,l.jsx)("input",{type:"password",value:Y.password,onChange:e=>Z({...Y,password:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 placeholder-gold-300/50 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",required:!0,minLength:6}),(0,l.jsx)("p",{className:"text-xs text-gold-300 mt-1",children:K("settings.minCharacters")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gold-200 mb-2",children:K("users.role")}),(0,l.jsxs)("select",{value:Y.role,onChange:e=>Z({...Y,role:e.target.value}),className:"w-full px-4 py-2 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:border-transparent focus-ring",children:[(0,l.jsx)("option",{value:"student",children:K("users.student")}),(0,l.jsx)("option",{value:"instructor",children:K("users.instructor")}),(0,l.jsx)("option",{value:"admin",children:K("users.administrator")})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)(S.A,{type:"button",variant:"secondary",onClick:()=>P(!1),className:"flex-1",children:K("button.cancel")}),(0,l.jsx)(S.A,{type:"submit",variant:"primary",disabled:ee,className:"flex-1",children:ee?K("users.creating"):K("users.createUser")})]})]})]})})]})}}},e=>{e.O(0,[3254,9051,7244,3568,4840,1338,9760,1624,8441,5964,7358],()=>e(e.s=8195)),_N_E=e.O()}]);