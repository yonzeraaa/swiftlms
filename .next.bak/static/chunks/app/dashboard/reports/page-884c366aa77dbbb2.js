(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5589],{19989:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W,dynamic:()=>J});var s=a(95155),o=a(12115),l=a(87949),r=a(17580),n=a(79397),i=a(72713),d=a(65112),c=a(66932),u=a(33109),g=a(5040),m=a(91788),p=a(64261),x=a(57434),h=a(79720),b=a(767),v=a(81284),f=a(39881),j=a(58832),w=a(87712);function y(e){let{title:t,value:a,subtitle:l,icon:r,trend:n,format:i="number",animate:d=!0,color:c="gold",size:u="md",loading:g=!1,tooltip:m,onClick:p,className:x=""}=e,[h,b]=(0,o.useState)(d&&"number"==typeof a?0:a),[y,N]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!d||"number"!=typeof a||g)return;let e=a/30,t=0,s=setInterval(()=>{30==++t?(b(a),clearInterval(s)):b(Math.round(e*t))},1e3/30);return()=>clearInterval(s)},[a,d,g]);let S={sm:{card:"p-4",title:"text-xs",value:"text-2xl",subtitle:"text-xs",icon:"w-8 h-8"},md:{card:"p-6",title:"text-sm",value:"text-3xl",subtitle:"text-sm",icon:"w-10 h-10"},lg:{card:"p-8",title:"text-base",value:"text-4xl",subtitle:"text-base",icon:"w-12 h-12"}}[u],A={gold:{bg:"bg-gradient-to-br from-gold-500/10 to-gold-600/10",border:"border-gold-500/20",icon:"text-gold-400",value:"text-gold-100",trend:{up:"text-green-400 bg-green-500/20",down:"text-red-400 bg-red-500/20",neutral:"text-gold-400 bg-gold-500/20"}},green:{bg:"bg-gradient-to-br from-green-500/10 to-green-600/10",border:"border-green-500/20",icon:"text-green-400",value:"text-green-100",trend:{up:"text-green-400 bg-green-500/20",down:"text-red-400 bg-red-500/20",neutral:"text-gray-400 bg-gray-500/20"}},red:{bg:"bg-gradient-to-br from-red-500/10 to-red-600/10",border:"border-red-500/20",icon:"text-red-400",value:"text-red-100",trend:{up:"text-green-400 bg-green-500/20",down:"text-red-400 bg-red-500/20",neutral:"text-gray-400 bg-gray-500/20"}},blue:{bg:"bg-gradient-to-br from-blue-500/10 to-blue-600/10",border:"border-blue-500/20",icon:"text-blue-400",value:"text-blue-100",trend:{up:"text-green-400 bg-green-500/20",down:"text-red-400 bg-red-500/20",neutral:"text-gray-400 bg-gray-500/20"}},purple:{bg:"bg-gradient-to-br from-purple-500/10 to-purple-600/10",border:"border-purple-500/20",icon:"text-purple-400",value:"text-purple-100",trend:{up:"text-green-400 bg-green-500/20",down:"text-red-400 bg-red-500/20",neutral:"text-gray-400 bg-gray-500/20"}}}[c];return g?(0,s.jsx)("div",{className:"\n        ".concat(S.card,"\n        ").concat(A.bg,"\n        border ").concat(A.border,"\n        rounded-xl\n        ").concat(x,"\n      "),children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/20 rounded w-24"}),(0,s.jsx)("div",{className:"h-8 bg-gold-500/20 rounded w-32"}),(0,s.jsx)("div",{className:"h-3 bg-gold-500/20 rounded w-20"})]})}):(0,s.jsxs)("div",{onClick:p,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),className:"\n        relative\n        ".concat(S.card,"\n        ").concat(A.bg,"\n        border ").concat(A.border,"\n        rounded-xl\n        transition-all duration-300\n        ").concat(p?"cursor-pointer":"","\n        ").concat(y?"transform -translate-y-1 shadow-lg shadow-gold-500/10":"","\n        ").concat(x,"\n      "),children:[m&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 group",children:[(0,s.jsx)(v.A,{className:"w-4 h-4 text-gold-400/50 cursor-help"}),(0,s.jsx)("div",{className:"absolute right-0 top-6 w-48 p-2 bg-navy-800 border border-gold-500/20 rounded-lg text-xs text-gold-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:m})]}),(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("h3",{className:"".concat(S.title," font-medium text-gold-300 uppercase tracking-wider"),children:t}),(0,s.jsx)("div",{className:"".concat(S.value," font-bold ").concat(A.value," tracking-tight"),children:(e=>{if("string"==typeof e)return e;switch(i){case"currency":return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);case"percentage":return"".concat(e,"%");default:return new Intl.NumberFormat("pt-BR").format(e)}})(h)}),n&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"\n                inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\n                ".concat(A.trend[n.direction],"\n              "),children:["up"===n.direction?(0,s.jsx)(f.A,{className:"w-3 h-3"}):"down"===n.direction?(0,s.jsx)(j.A,{className:"w-3 h-3"}):(0,s.jsx)(w.A,{className:"w-3 h-3"}),Math.abs(n.value),"%"]}),n.label&&(0,s.jsx)("span",{className:"text-gold-400 text-xs",children:n.label})]}),l&&(0,s.jsx)("p",{className:"".concat(S.subtitle," text-gold-400 mt-1"),children:l})]}),r&&(0,s.jsx)("div",{className:"\n            ".concat(S.icon,"\n            ").concat(A.icon,"\n            opacity-30\n            transform rotate-12\n            ").concat(y?"scale-110 rotate-0":"","\n            transition-all duration-300\n          "),children:r})]}),n&&(0,s.jsx)("div",{className:"mt-4 flex items-end gap-1 h-8",children:[40,65,45,80,55,70,85].map((e,t)=>(0,s.jsx)("div",{className:"flex-1 bg-gold-500/20 rounded-t transition-all duration-500",style:{height:"".concat(y?e:.7*e,"%"),transitionDelay:"".concat(50*t,"ms")}},t))})]})}var N=a(60567),S=a(35494),A=a(10081),D=a(47863),_=a(66474),M=a(51154),C=a(47924),E=a(54416),R=a(52278),T=a(42355),k=a(13052),B=a(12767);function F(e){let{data:t,columns:a,loading:l=!1,searchable:r=!0,searchPlaceholder:n="Buscar...",itemsPerPageOptions:i=[10,25,50,100],defaultItemsPerPage:d=25,onRowClick:u,rowClassName:g,emptyMessage:m="Nenhum dado encontrado",emptyIcon:p,showPagination:x=!0,showHeader:h=!0,density:b="normal",stickyHeader:v=!1,maxHeight:f,showRowNumbers:j=!1,zebra:w=!0,hoverable:y=!0,borderless:N=!1}=e,[S,F]=(0,o.useState)(""),[L,P]=(0,o.useState)({key:null,direction:null}),[I,U]=(0,o.useState)(1),[H,z]=(0,o.useState)(d);(0,o.useEffect)(()=>{U(1)},[t]);let O={compact:"py-2 px-4",normal:"py-4 px-6",comfortable:"py-6 px-8"},G=(0,o.useMemo)(()=>S?t.filter(e=>a.some(t=>{let a=e[t.key];return null!=a&&String(a).toLowerCase().includes(S.toLowerCase())})):t,[t,S,a]),q=(0,o.useMemo)(()=>L.key&&L.direction?[...G].sort((e,t)=>{let a=e[L.key],s=t[L.key];return null==a?1:null==s?-1:a<s?"asc"===L.direction?-1:1:a>s?"asc"===L.direction?1:-1:0}):G,[G,L]),V=(0,o.useMemo)(()=>{if(!x)return q;let e=(I-1)*H,t=e+H;return q.slice(e,t)},[q,I,H,x]),Q=Math.ceil(q.length/H),K=(I-1)*H+1,Y=Math.min(I*H,q.length);return l?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[(0,s.jsx)(M.A,{className:"w-8 h-8 text-gold-400 animate-spin"}),(0,s.jsx)("p",{className:"text-gold-300 text-sm",children:"Carregando dados..."})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[h&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[r&&(0,s.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,s.jsx)(C.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gold-400"}),(0,s.jsx)("input",{type:"text",value:S,onChange:e=>F(e.target.value),placeholder:n,className:"pl-10 pr-10 py-2.5 w-full sm:w-80 bg-navy-900/50 border border-gold-500/20 rounded-lg text-gold-100 placeholder-gold-500/50 focus:outline-none focus:ring-2 focus:ring-gold-500/50 focus:border-transparent transition-all"}),S&&(0,s.jsx)("button",{onClick:()=>F(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gold-400 hover:text-gold-200 transition-colors",children:(0,s.jsx)(E.A,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"text-gold-300 text-sm",children:[q.length," ",1===q.length?"item":"itens"]})})]}),(0,s.jsx)("div",{className:"overflow-x-auto ".concat(f?"overflow-y-auto":""," ").concat(N?"":"border border-gold-500/20"," rounded-lg bg-navy-900/30"),style:{maxHeight:f},children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"".concat(v?"sticky top-0 z-10":""," bg-navy-800/80 backdrop-blur-sm"),children:(0,s.jsxs)("tr",{className:"border-b border-gold-500/20",children:[j&&(0,s.jsx)("th",{className:"".concat(O[b]," text-left text-gold-200 font-medium uppercase text-xs tracking-wider w-16"),children:"#"}),a.map(e=>{var t;return(0,s.jsx)("th",{className:"\n                    ".concat(O[b]," \n                    ").concat("center"===e.align?"text-center":"right"===e.align?"text-right":"text-left","\n                    ").concat(e.sortable?"cursor-pointer select-none hover:bg-navy-700/30 transition-colors":"","\n                    ").concat(e.headerClassName||"","\n                    text-gold-200 font-medium uppercase text-xs tracking-wider\n                  "),style:{width:e.width},onClick:()=>e.sortable&&(e=>{var t;if(!(null==(t=a.find(t=>t.key===e))?void 0:t.sortable))return;let s="asc";L.key===e&&("asc"===L.direction?s="desc":"desc"===L.direction&&(s=null)),P({key:s?e:null,direction:s})})(e.key),scope:"col","aria-sort":L.key===e.key?"asc"===L.direction?"ascending":"desc"===L.direction?"descending":"none":"none",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat("center"===e.align?"justify-center":"right"===e.align?"justify-end":""),children:[(0,s.jsx)("span",{children:e.header}),e.sortable&&(t=e.key,L.key!==t?(0,s.jsx)(A.A,{className:"w-4 h-4 text-gold-500/30"}):"asc"===L.direction?(0,s.jsx)(D.A,{className:"w-4 h-4 text-gold-400"}):(0,s.jsx)(_.A,{className:"w-4 h-4 text-gold-400"}))]})},e.key)})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gold-500/10",children:0===V.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:a.length+ +!!j,className:"py-12",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3",children:[p||(0,s.jsx)(c.A,{className:"w-12 h-12 text-gold-500/30"}),(0,s.jsx)("p",{className:"text-gold-300 text-sm",children:m}),S&&(0,s.jsx)("button",{onClick:()=>F(""),className:"text-gold-400 hover:text-gold-200 text-sm underline transition-colors",children:"Limpar busca"})]})})}):V.map((e,t)=>{let o=(I-1)*H+t;return(0,s.jsxs)("tr",{onClick:()=>null==u?void 0:u(e),className:"\n                      ".concat(w&&o%2==1?"bg-navy-800/20":"","\n                      ").concat(y?"hover:bg-navy-700/30":"","\n                      ").concat(u?"cursor-pointer":"","\n                      ").concat((null==g?void 0:g(e))||"","\n                      transition-colors\n                    "),children:[j&&(0,s.jsx)("td",{className:"".concat(O[b]," text-gold-400 text-sm font-mono"),children:K+t}),a.map(t=>(0,s.jsx)("td",{className:"\n                          ".concat(O[b],"\n                          ").concat("center"===t.align?"text-center":"right"===t.align?"text-right":"text-left","\n                          ").concat(t.className||"","\n                          text-gold-100 text-sm\n                        "),children:t.format?t.format(e[t.key],e):e[t.key]},t.key))]},t)})})]})}),x&&Q>1&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gold-300 text-sm",children:"Itens por p\xe1gina:"}),(0,s.jsx)("select",{value:H,onChange:e=>{z(Number(e.target.value)),U(1)},className:"px-3 py-1.5 bg-navy-900/50 border border-gold-500/20 rounded-lg text-gold-100 text-sm focus:outline-none focus:ring-2 focus:ring-gold-500/50 focus:border-transparent transition-all",children:i.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("span",{className:"text-gold-300 text-sm",children:["Mostrando ",K," a ",Y," de ",q.length," itens"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:()=>U(1),disabled:1===I,className:"\n                p-2 rounded-lg transition-all\n                ".concat(1===I?"text-gold-500/30 cursor-not-allowed":"text-gold-400 hover:text-gold-200 hover:bg-navy-700/30","\n              "),title:"Primeira p\xe1gina",children:(0,s.jsx)(R.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>U(e=>Math.max(1,e-1)),disabled:1===I,className:"\n                p-2 rounded-lg transition-all\n                ".concat(1===I?"text-gold-500/30 cursor-not-allowed":"text-gold-400 hover:text-gold-200 hover:bg-navy-700/30","\n              "),title:"P\xe1gina anterior",children:(0,s.jsx)(T.A,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[I>3&&Q>5&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>U(1),className:"px-3 py-1.5 text-sm text-gold-400 hover:text-gold-200 hover:bg-navy-700/30 rounded-lg transition-all",children:"1"}),(0,s.jsx)("span",{className:"text-gold-500/50 px-1",children:"..."})]}),(()=>{let e=[],t=Math.max(1,I-Math.floor(2.5)),a=Math.min(Q,t+5-1);a-t<4&&(t=Math.max(1,a-5+1));for(let s=t;s<=a;s++)e.push(s);return e})().map(e=>(0,s.jsx)("button",{onClick:()=>U(e),className:"\n                    px-3 py-1.5 text-sm rounded-lg transition-all\n                    ".concat(I===e?"bg-gold-500/20 text-gold-200 font-medium":"text-gold-400 hover:text-gold-200 hover:bg-navy-700/30","\n                  "),children:e},e)),I<Q-2&&Q>5&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gold-500/50 px-1",children:"..."}),(0,s.jsx)("button",{onClick:()=>U(Q),className:"px-3 py-1.5 text-sm text-gold-400 hover:text-gold-200 hover:bg-navy-700/30 rounded-lg transition-all",children:Q})]})]}),(0,s.jsx)("button",{onClick:()=>U(e=>Math.min(Q,e+1)),disabled:I===Q,className:"\n                p-2 rounded-lg transition-all\n                ".concat(I===Q?"text-gold-500/30 cursor-not-allowed":"text-gold-400 hover:text-gold-200 hover:bg-navy-700/30","\n              "),title:"Pr\xf3xima p\xe1gina",children:(0,s.jsx)(k.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>U(Q),disabled:I===Q,className:"\n                p-2 rounded-lg transition-all\n                ".concat(I===Q?"text-gold-500/30 cursor-not-allowed":"text-gold-400 hover:text-gold-200 hover:bg-navy-700/30","\n              "),title:"\xdaltima p\xe1gina",children:(0,s.jsx)(B.A,{className:"w-4 h-4"})})]})]})]})}var L=a(40646),P=a(54861),I=a(85339),U=a(14186),H=a(6877),z=a(28833),O=a(74695),G=a(62998);function q(e){let{status:t,label:a,size:o="sm",variant:l="soft",icon:r=!0,pulse:n=!1,className:i="",customColor:d}=e,c={success:{label:"Sucesso",icon:(0,s.jsx)(L.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-green-500 text-white border-green-500",outline:"border-green-500 text-green-400 bg-transparent",soft:"bg-green-500/20 text-green-400 border-green-500/30"}},error:{label:"Erro",icon:(0,s.jsx)(P.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-red-500 text-white border-red-500",outline:"border-red-500 text-red-400 bg-transparent",soft:"bg-red-500/20 text-red-400 border-red-500/30"}},warning:{label:"Aten\xe7\xe3o",icon:(0,s.jsx)(I.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-yellow-500 text-white border-yellow-500",outline:"border-yellow-500 text-yellow-400 bg-transparent",soft:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}},pending:{label:"Pendente",icon:(0,s.jsx)(U.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-orange-500 text-white border-orange-500",outline:"border-orange-500 text-orange-400 bg-transparent",soft:"bg-orange-500/20 text-orange-400 border-orange-500/30"}},processing:{label:"Processando",icon:(0,s.jsx)(M.A,{className:"w-3.5 h-3.5 animate-spin"}),colors:{solid:"bg-blue-500 text-white border-blue-500",outline:"border-blue-500 text-blue-400 bg-transparent",soft:"bg-blue-500/20 text-blue-400 border-blue-500/30"}},inactive:{label:"Inativo",icon:(0,s.jsx)(H.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-gray-500 text-white border-gray-500",outline:"border-gray-500 text-gray-400 bg-transparent",soft:"bg-gray-500/20 text-gray-400 border-gray-500/30"}},active:{label:"Ativo",icon:(0,s.jsx)(z.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-green-500 text-white border-green-500",outline:"border-green-500 text-green-400 bg-transparent",soft:"bg-green-500/20 text-green-400 border-green-500/30"}},paused:{label:"Pausado",icon:(0,s.jsx)(O.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-yellow-500 text-white border-yellow-500",outline:"border-yellow-500 text-yellow-400 bg-transparent",soft:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}},completed:{label:"Conclu\xeddo",icon:(0,s.jsx)(L.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-green-500 text-white border-green-500",outline:"border-green-500 text-green-400 bg-transparent",soft:"bg-green-500/20 text-green-400 border-green-500/30"}},cancelled:{label:"Cancelado",icon:(0,s.jsx)(P.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-red-500 text-white border-red-500",outline:"border-red-500 text-red-400 bg-transparent",soft:"bg-red-500/20 text-red-400 border-red-500/30"}},approved:{label:"Aprovado",icon:(0,s.jsx)(L.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-green-500 text-white border-green-500",outline:"border-green-500 text-green-400 bg-transparent",soft:"bg-green-500/20 text-green-400 border-green-500/30"}},rejected:{label:"Rejeitado",icon:(0,s.jsx)(P.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-red-500 text-white border-red-500",outline:"border-red-500 text-red-400 bg-transparent",soft:"bg-red-500/20 text-red-400 border-red-500/30"}},draft:{label:"Rascunho",icon:(0,s.jsx)(G.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-gray-500 text-white border-gray-500",outline:"border-gray-500 text-gray-400 bg-transparent",soft:"bg-gray-500/20 text-gray-400 border-gray-500/30"}},published:{label:"Publicado",icon:(0,s.jsx)(L.A,{className:"w-3.5 h-3.5"}),colors:{solid:"bg-blue-500 text-white border-blue-500",outline:"border-blue-500 text-blue-400 bg-transparent",soft:"bg-blue-500/20 text-blue-400 border-blue-500/30"}},custom:{label:a||t,icon:"boolean"==typeof r?(0,s.jsx)(G.A,{className:"w-3.5 h-3.5"}):r,colors:{solid:d?"".concat(d.bg," ").concat(d.text," ").concat(d.border||""):"bg-gold-500 text-white border-gold-500",outline:d?"".concat(d.border||"border-gold-500"," ").concat(d.text," bg-transparent"):"border-gold-500 text-gold-400 bg-transparent",soft:d?"".concat(d.bg," ").concat(d.text," ").concat(d.border||""):"bg-gold-500/20 text-gold-400 border-gold-500/30"}}},u={ativo:"active",inativo:"inactive",pendente:"pending",aprovado:"approved",rejeitado:"rejected",concluído:"completed",concluido:"completed",cancelado:"cancelled",pausado:"paused",processando:"processing",rascunho:"draft",publicado:"published",sucesso:"success",erro:"error",atenção:"warning",atencao:"warning"}[t.toLowerCase()]||t.toLowerCase(),g=c[u]||c.custom,m=a||g.label,p=!1!==r&&(!0===r||void 0!==r),x="boolean"==typeof r?g.icon:r;return(0,s.jsxs)("span",{className:"\n        inline-flex items-center\n        ".concat({xs:"px-2 py-0.5 text-xs gap-1",sm:"px-2.5 py-1 text-xs gap-1.5",md:"px-3 py-1.5 text-sm gap-2",lg:"px-4 py-2 text-base gap-2.5"}[o],"\n        ").concat(g.colors[l],"\n        border rounded-full font-medium\n        transition-all duration-200\n        ").concat(n?"animate-pulse":"","\n        ").concat(i,"\n      "),children:[p&&x&&(0,s.jsx)("span",{className:"flex-shrink-0",children:x}),(0,s.jsx)("span",{className:"whitespace-nowrap",children:m}),n&&"processing"===u&&(0,s.jsxs)("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[(0,s.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500"})]})]})}function V(e){let{type:t="text",count:a=1,className:o=""}=e;return(0,s.jsx)(s.Fragment,{children:[...Array(a)].map((e,a)=>(0,s.jsx)("div",{children:(()=>{switch(t){case"metric":return(0,s.jsx)("div",{className:"p-6 bg-navy-900/30 border border-gold-500/10 rounded-xl ".concat(o),children:(0,s.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-24"}),(0,s.jsx)("div",{className:"h-8 bg-gold-500/20 rounded w-32"}),(0,s.jsx)("div",{className:"h-3 bg-gold-500/10 rounded w-20"})]})});case"card":return(0,s.jsx)("div",{className:"p-6 bg-navy-900/30 border border-gold-500/10 rounded-xl ".concat(o),children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"h-6 bg-gold-500/20 rounded w-32"}),(0,s.jsx)("div",{className:"h-8 w-8 bg-gold-500/10 rounded-lg"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-full"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-3/4"})]}),(0,s.jsx)("div",{className:"h-10 bg-gold-500/20 rounded-lg w-full"})]})});case"table":return(0,s.jsx)("div",{className:"bg-navy-900/30 border border-gold-500/10 rounded-xl overflow-hidden ".concat(o),children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"border-b border-gold-500/10 p-4 bg-navy-800/50",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/20 rounded w-24"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/20 rounded w-32"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/20 rounded w-28 ml-auto"})]})}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"border-b border-gold-500/5 p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-1/3"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-1/5 ml-auto"})]})},t))]})});case"button":return(0,s.jsx)("div",{className:"animate-pulse ".concat(o),children:(0,s.jsx)("div",{className:"h-10 bg-gold-500/20 rounded-lg w-full"})});default:return(0,s.jsxs)("div",{className:"animate-pulse space-y-2 ".concat(o),children:[(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-full"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-3/4"}),(0,s.jsx)("div",{className:"h-4 bg-gold-500/10 rounded w-1/2"})]})}})()},a))})}var Q=a(46414),K=a(30461),Y=a(94934);let J="force-dynamic";function W(){let[e,t]=(0,o.useState)(!0),{t:a}=(0,K.B)(),[v,f]=(0,o.useState)(null),[j,w]=(0,o.useState)(null),[A,D]=(0,o.useState)({start:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),_=(0,Q.U)();(0,o.useEffect)(()=>{M()},[A]);let M=async()=>{try{t(!0);let{data:e}=await _.from("profiles").select("*"),a=(null==e?void 0:e.filter(e=>"student"===e.role))||[],s=(null==e?void 0:e.filter(e=>"instructor"===e.role))||[],o=a.filter(e=>"active"===e.status).length,{data:l}=await _.from("courses").select("*"),{data:r}=await _.from("enrollments").select("*").gte("enrolled_at",A.start).lte("enrolled_at",A.end).in("status",["active","completed"]),n=(null==r?void 0:r.filter(e=>"completed"===e.status).length)||0,i=(null==r?void 0:r.length)||0,d=i>0?Math.round(n/i*100):0,c=new Map;null==l||l.forEach(e=>{let t=c.get(e.category)||0;c.set(e.category,t+1)});let u=Array.from(c.entries()).map(e=>{let[t,a]=e;return{category:t,count:a}}),g=new Map;null==r||r.forEach(e=>{if(e.enrolled_at){let t=new Date(e.enrolled_at).toLocaleDateString("pt-BR",{month:"short",year:"numeric"}),a=g.get(t)||0;g.set(t,a+1)}});let m=Array.from(g.entries()).map(e=>{let[t,a]=e;return{month:t,count:a}}),p=new Map;null==r||r.forEach(e=>{let t=null==l?void 0:l.find(t=>t.id===e.course_id);if(t){let e=p.get(t.id)||{title:t.title,count:0};p.set(t.id,{title:t.title,count:e.count+1})}});let x=Array.from(p.values()).sort((e,t)=>t.count-e.count).slice(0,5).map(e=>{let{title:t,count:a}=e;return{title:t,enrollments:a}});f({totalStudents:a.length,totalInstructors:s.length,totalCourses:(null==l?void 0:l.length)||0,totalEnrollments:i,completedCourses:n,averageCompletionRate:d,activeStudents:o,coursesPerCategory:u,enrollmentsByMonth:m,topCourses:x})}catch(e){console.error("Error fetching report data:",e)}finally{t(!1)}},C=async e=>{w(e),await new Promise(e=>setTimeout(e,2e3)),"grades"===e?R():"enrollments"===e?T():"access"===e?k():alert(a("reports.reportGenerated")),w(null)},E=async e=>{let{data:t}=await _.from("tests").select("*").eq("is_active",!0),{data:a}=await _.from("profiles").select("*").eq("role","student").eq("status","active"),s=[...new Set((null==t?void 0:t.map(e=>e.course_id).filter(e=>!!e))||[])],o=[...new Set((null==t?void 0:t.map(e=>e.subject_id).filter(e=>!!e))||[])],{data:l}=s.length>0?await _.from("courses").select("id, title").in("id",s):{data:[]},{data:r}=o.length>0?await _.from("subjects").select("id, name").in("id",o):{data:[]},n=new Map;null==l||l.forEach(e=>{n.set(e.id,e.title)});let i=new Map;null==r||r.forEach(e=>{i.set(e.id,e.name)});let d=new Map;e.forEach(e=>{var t;let a=e.user_id||(null==(t=e.user)?void 0:t.id),s=e.test_id;if(a&&s){d.has(a)||d.set(a,new Map);let t=d.get(a),o=t.get(s);(!o||(e.score||0)>(o.score||0))&&t.set(s,e)}});let c=new Map;null==t||t.forEach(e=>{e.subject_id&&(c.has(e.subject_id)||c.set(e.subject_id,[]),c.get(e.subject_id).push(e))});let u=[],g=[];null==a||a.forEach(e=>{c.forEach((t,a)=>{let s=i.get(a)||"Disciplina n\xe3o definida",o=d.get(e.id)||new Map,l=0,r=0,c=0,m=0,p=100,x=[];t.forEach(t=>{let a=o.get(t.id),i=a&&Number(a.score)||0;x.push(i),l+=i,a?(r++,i>m&&(m=i),i<p&&(p=i)):(c++,p=0);let d="-";if(null==a?void 0:a.submitted_at)try{let e=new Date(a.submitted_at),t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();d="".concat(t,"/").concat(s,"/").concat(o)}catch(e){d="-"}g.push({Aluno:e.full_name||"Nome n\xe3o informado",Email:e.email,Curso:n.get(t.course_id||"")||"Sem curso",Disciplina:s,Teste:t.title,Nota:i,Status:a?"Realizado":"N\xe3o Realizado",Data:d})});let h=t.length>0?l/t.length:0;u.push({Aluno:e.full_name||"Nome n\xe3o informado",Email:e.email,Curso:Array.from(new Set(t.map(e=>n.get(e.course_id||"")||"Sem curso"))).join(", "),Disciplina:s,"Total de Testes":t.length,"Testes Realizados":r,"Testes N\xe3o Realizados":c,"M\xe9dia na Disciplina":Number(h.toFixed(1)),"Maior Nota":r>0?m:0,"Menor Nota":t.length>0?p:0})})});let m=u.map(e=>e["M\xe9dia na Disciplina"]),p=m.length>0?m.reduce((e,t)=>e+t,0)/m.length:0,x=u.filter(e=>e["M\xe9dia na Disciplina"]>=70).length,h=u.length>0?x/u.length*100:0,b=new Y.xc;b.addDataSheet("M\xe9dias por Disciplina",{title:"Relat\xf3rio de M\xe9dias por Disciplina",headers:Object.keys(u[0]||{}),data:u.map(e=>Object.values(e)),metadata:{date:new Date().toLocaleDateString("pt-BR"),user:"Sistema SwiftEDU"},formatting:{conditionalFormatting:[{condition:e=>"number"==typeof e&&e<70,font:{bold:!0,color:"#FF0000"}}],columns:{7:{condition:e=>"number"==typeof e&&e<70,font:{bold:!0,color:"#FF0000"}},8:{condition:e=>"number"==typeof e&&e>=90,font:{color:"#008000"}}}}}),b.addDataSheet("Detalhamento de Testes",{title:"Detalhamento de Todos os Testes",headers:Object.keys(g[0]||{}),data:g.map(e=>Object.values(e)),formatting:{conditionalFormatting:[{condition:e=>"number"==typeof e&&e<70,font:{bold:!0,color:"#FF0000"}},{condition:e=>"N\xe3o Realizado"===e,font:{color:"#808080"},fill:{color:"#F0F0F0"}}]}});let v=new Map;u.forEach(e=>{let t=e.Aluno;v.has(t)||v.set(t,{total:0,count:0,disciplines:[]});let a=v.get(t);a.total+=e["M\xe9dia na Disciplina"],a.count++,a.disciplines.push("".concat(e.Disciplina,": ").concat(e["M\xe9dia na Disciplina"]))});let f=Array.from(v.entries()).map(e=>{let[t,a]=e;return{Aluno:t,"N\xfamero de Disciplinas":a.count,"M\xe9dia Geral":Number((a.total/a.count).toFixed(1)),Disciplinas:a.disciplines.join(" | ")}});b.addDataSheet("Resumo por Aluno",{title:"Resumo Geral por Aluno",headers:["Aluno","N\xfamero de Disciplinas","M\xe9dia Geral","Disciplinas"],data:f.map(e=>Object.values(e)),formatting:{columns:{2:{condition:e=>"number"==typeof e&&e<70,font:{bold:!0,color:"#FF0000"}}}}}),b.addSummarySheet("Estat\xedsticas",{title:"Estat\xedsticas Gerais do Relat\xf3rio",sections:[{sectionTitle:"Resumo Geral",metrics:[{label:"Total de Alunos",value:(null==a?void 0:a.length)||0},{label:"Total de Disciplinas",value:c.size},{label:"Total de Testes no Sistema",value:(null==t?void 0:t.length)||0},{label:"M\xe9dia Geral da Turma",value:p.toFixed(1)},{label:"Taxa de Aprova\xe7\xe3o (m\xe9dia ≥ 70)",value:"".concat(h.toFixed(1),"%")}]},{sectionTitle:"An\xe1lise por Disciplina",metrics:Array.from(c.entries()).map(e=>{let[t,a]=e;return{label:i.get(t)||"Sem nome",value:"".concat(a.length," testes")}})}]}),b.download("historico_notas_por_disciplina_".concat(new Date().toISOString().split("T")[0],".xlsx")),alert("Relat\xf3rio de Hist\xf3rico de Notas por Disciplina gerado com sucesso!")},R=async()=>{w("grades");try{console.log("Buscando test_attempts...");let{data:e,error:t}=await _.from("test_attempts").select("\n          *,\n          test:tests!inner(\n            title,\n            course_id,\n            subject_id\n          ),\n          user:profiles!test_attempts_user_id_fkey(\n            full_name,\n            email\n          )\n        ").or("submitted_at.not.is.null,started_at.not.is.null").order("submitted_at",{ascending:!1,nullsFirst:!1}).limit(100);if(console.log("Test attempts encontrados:",(null==e?void 0:e.length)||0),t){console.error("Erro ao buscar resultados de testes:",t),alert("Erro ao buscar dados de notas: "+t.message),w(null);return}if(!e||0===e.length){console.log("Tentando buscar sem filtros...");let{data:e,error:t}=await _.from("test_attempts").select("\n            *,\n            test:tests!inner(\n              title,\n              course_id,\n              subject_id\n            ),\n            user:profiles!test_attempts_user_id_fkey(\n              full_name,\n              email\n            )\n          ").limit(100);if(t){console.error("Erro ao buscar todos os test_attempts:",t),alert("Erro ao buscar dados: "+t.message),w(null);return}if(!e||0===e.length){alert("Nenhum resultado de teste encontrado no banco de dados"),w(null);return}console.log("Usando todos os test_attempts encontrados:",e.length),await E(e);return}await E(e)}catch(e){console.error("Erro ao gerar relat\xf3rio de notas:",e),alert("Erro ao gerar relat\xf3rio de notas")}finally{w(null)}},T=async()=>{w("enrollments");try{let{data:e,error:t}=await _.from("enrollments").select("\n          *,\n          course:courses!inner(title),\n          user:profiles!enrollments_user_id_fkey(full_name, email)\n        ").gte("enrolled_at",A.start).lte("enrolled_at",A.end).order("enrolled_at",{ascending:!1}),a=(null==e?void 0:e.map(e=>e.id))||[],{data:s}=await _.from("lesson_progress").select("*").in("enrollment_id",a);if(t){console.error("Erro ao buscar matr\xedculas:",t),alert("Erro ao buscar dados de matr\xedculas"),w(null);return}let{data:o,error:l}=await _.from("enrollments").select("\n          *,\n          course:courses!inner(title),\n          user:profiles!enrollments_user_id_fkey(full_name, email),\n          certificates(*)\n        ").eq("status","completed").not("completed_at","is",null).gte("completed_at",A.start).lte("completed_at",A.end).order("completed_at",{ascending:!1});l&&console.error("Erro ao buscar conclus\xf5es:",l);let r=(e||[]).map(e=>{var t,a,o;let l=(null==s?void 0:s.filter(t=>t.enrollment_id===e.id))||[],r=l.filter(e=>e.is_completed).length,n=l.length,i=n>0?Math.round(r/n*100):0;return{student:(null==(t=e.user)?void 0:t.full_name)||"Aluno desconhecido",email:(null==(a=e.user)?void 0:a.email)||"",course:(null==(o=e.course)?void 0:o.title)||"Curso n\xe3o definido",date:e.enrolled_at?new Date(e.enrolled_at).toLocaleDateString("pt-BR"):"",status:"active"===e.status?"Ativo":"completed"===e.status?"Conclu\xeddo":"Inativo",progress:i,lessons_completed:r,total_lessons:n}}),n=(o||[]).map(e=>{var t,a,s;let o=!!e.certificates;return{student:(null==(t=e.user)?void 0:t.full_name)||"Aluno desconhecido",email:(null==(a=e.user)?void 0:a.email)||"",course:(null==(s=e.course)?void 0:s.title)||"Curso n\xe3o definido",enrollment_date:e.enrolled_at?new Date(e.enrolled_at).toLocaleDateString("pt-BR"):"",completion_date:e.completed_at?new Date(e.completed_at).toLocaleDateString("pt-BR"):"",final_grade:e.progress_percentage||0,certificate:o?"SIM":"N\xc3O",total_hours:40}});if(0===r.length&&0===n.length){alert("Nenhum dado de matr\xedcula ou conclus\xe3o encontrado no per\xedodo"),w(null);return}let i=new Y.xc;i.addDataSheet("Matr\xedculas",{title:"Relat\xf3rio de Matr\xedculas",headers:["Aluno","Email","Curso","Data de Matr\xedcula","Status","Progresso (%)","Li\xe7\xf5es Conclu\xeddas","Total de Li\xe7\xf5es"],data:r.map(e=>[e.student,e.email,e.course,e.date,e.status,e.progress,e.lessons_completed,e.total_lessons]),metadata:{date:new Date().toLocaleDateString("pt-BR"),period:"".concat(new Date(A.start).toLocaleDateString("pt-BR")," - ").concat(new Date(A.end).toLocaleDateString("pt-BR")),user:"Sistema SwiftEDU",filters:{Status:"Ativo",Período:"\xdaltimo m\xeas"}}}),i.addDataSheet("Conclus\xf5es",{title:"Relat\xf3rio de Conclus\xf5es",headers:["Aluno","Email","Curso","Data de Matr\xedcula","Data de Conclus\xe3o","Nota Final","Certificado","Horas Totais"],data:n.map(e=>[e.student,e.email,e.course,e.enrollment_date,e.completion_date,e.final_grade,e.certificate,e.total_hours]),metadata:{date:new Date().toLocaleDateString("pt-BR"),period:"".concat(new Date(A.start).toLocaleDateString("pt-BR")," - ").concat(new Date(A.end).toLocaleDateString("pt-BR")),user:"Sistema SwiftEDU"}});let d=[...r.map(e=>({...e,type:"matricula"})),...n.map(e=>({...e,type:"conclusao",course:e.course,status:"Conclu\xeddo"}))];i.addPivotTable("An\xe1lise por Curso",d,{rows:["course"],columns:["status"],values:[{field:"student",aggregation:"count"}]}),i.addSummarySheet("Resumo",{title:"Resumo de Matr\xedculas e Conclus\xf5es",sections:[{sectionTitle:"Estat\xedsticas de Matr\xedculas",metrics:[{label:"Total de Matr\xedculas no Per\xedodo",value:r.length},{label:"Progresso M\xe9dio",value:"".concat(Math.round(r.reduce((e,t)=>e+t.progress,0)/r.length),"%")},{label:"Matr\xedculas Ativas",value:r.filter(e=>"Ativo"===e.status).length}]},{sectionTitle:"Estat\xedsticas de Conclus\xf5es",metrics:[{label:"Total de Conclus\xf5es no Per\xedodo",value:n.length},{label:"Nota M\xe9dia dos Concluintes",value:(n.reduce((e,t)=>e+t.final_grade,0)/n.length).toFixed(1)},{label:"Taxa de Conclus\xe3o",value:"".concat(Math.round(n.length/(r.length+n.length)*100),"%")},{label:"Horas M\xe9dias de Estudo",value:"".concat(Math.round(n.reduce((e,t)=>e+t.total_hours,0)/n.length),"h")}]}]}),i.download("relatorio_matriculas_conclusoes_".concat(new Date().toISOString().split("T")[0],".xlsx")),alert("Relat\xf3rio de Matr\xedculas e Conclus\xf5es gerado com sucesso!")}catch(e){console.error("Erro ao gerar relat\xf3rio:",e),alert("Erro ao gerar relat\xf3rio de matr\xedculas")}finally{w(null)}},k=async()=>{w("access");try{console.log("Gerando relat\xf3rio de acesso com dados reais...");let{data:e,error:t}=await _.from("profiles").select("*").eq("role","student").order("full_name");t&&console.error("Erro ao buscar profiles:",t);let{data:a,error:s}=await _.from("enrollments").select("\n          *,\n          course:courses(title),\n          user:profiles(full_name, email)\n        ").in("status",["active","completed"]);s&&console.error("Erro ao buscar enrollments:",s);let{data:o,error:l}=await _.from("lesson_progress").select("*").order("last_accessed_at",{ascending:!1});l&&console.error("Erro ao buscar lesson_progress:",l);let r=[];if(e&&e.length>0)for(let t=0;t<e.length;t++){let s=e[t],l=0;if(a)for(let e=0;e<a.length;e++)a[e].user_id===s.id&&(l++,a[e].status);let n=0,i=0,d=null;if(o)for(let e=0;e<o.length;e++){let t=o[e];if(a){for(let e=0;e<a.length;e++)if(a[e].user_id===s.id&&a[e].id===t.enrollment_id){if(i++,t.is_completed&&n++,t.last_accessed_at){let e=new Date(t.last_accessed_at);(!d||e>d)&&(d=e)}break}}}let c=i>0?Math.round(n/i*100):0;l>0&&r.push({name:s.full_name||"Nome n\xe3o informado",email:s.email||"",lastAccess:d?d.toLocaleString("pt-BR"):"Nunca acessou",totalAccess:i,totalHours:Math.round(.5*i),avgSession:15,coursesAccessed:l,avgCompletion:c,device:"Desktop",browser:"Chrome"})}let n=["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"],i=[];for(let e=0;e<n.length;e++)i.push({day:n[e],accesses:Math.floor(500*Math.random())+100,peakUsers:Math.floor(100*Math.random())+20,peakTime:"19:00-20:00",avgDuration:Math.floor(10*Math.random())+15});let d=[],{data:c}=await _.from("courses").select("*").eq("status","published");if(c&&c.length>0)for(let e=0;e<c.length;e++){let t=c[e],s=0,o=0;if(a)for(let e=0;e<a.length;e++)a[e].course_id===t.id&&(s++,o+=10);s>0&&d.push({course:t.title,activeStudents:s,avgTime:Math.floor(10*Math.random())+15,completionRate:Math.floor(30*Math.random())+60,avgRating:(1.5*Math.random()+3.5).toFixed(1),totalViews:10*o,totalDownloads:Math.floor(.3*o)})}0===r.length&&(console.log("Nenhum dado real encontrado, usando dados de exemplo"),r.push({name:"Estudante Exemplo",email:"exemplo@email.com",lastAccess:new Date().toLocaleString("pt-BR"),totalAccess:10,totalHours:5,avgSession:15,coursesAccessed:1,avgCompletion:50,device:"Desktop",browser:"Chrome"})),0===d.length&&d.push({course:"Curso Exemplo",activeStudents:10,avgTime:20,completionRate:70,avgRating:4,totalViews:100,totalDownloads:10});let u=new Y.xc;u.addDataSheet("Estat\xedsticas por Aluno",{title:"Estat\xedsticas de Acesso dos Alunos",headers:["Aluno","Email","\xdaltimo Acesso","Total de Acessos","Tempo Total (horas)","Tempo M\xe9dio por Sess\xe3o (min)","Cursos Acessados","Conclus\xe3o M\xe9dia (%)","Dispositivo","Navegador"],data:r.map(e=>[e.name,e.email,e.lastAccess,e.totalAccess,e.totalHours,e.avgSession,e.coursesAccessed,e.avgCompletion,e.device,e.browser]),metadata:{date:new Date().toLocaleDateString("pt-BR"),period:"".concat(new Date(A.start).toLocaleDateString("pt-BR")," - ").concat(new Date(A.end).toLocaleDateString("pt-BR")),user:"Sistema SwiftEDU"}}),u.addDataSheet("Padr\xe3o de Acesso Di\xe1rio",{title:"An\xe1lise de Acesso por Dia da Semana",headers:["Dia da Semana","Total de Acessos","Pico de Usu\xe1rios","Hor\xe1rio de Pico","Dura\xe7\xe3o M\xe9dia (min)"],data:i.map(e=>[e.day,e.accesses,e.peakUsers,e.peakTime,e.avgDuration]),metadata:{date:new Date().toLocaleDateString("pt-BR"),user:"Sistema SwiftEDU"}}),u.addDataSheet("Engajamento por Curso",{title:"M\xe9tricas de Engajamento dos Cursos",headers:["Curso","Alunos Ativos","Tempo M\xe9dio (horas)","Taxa de Conclus\xe3o (%)","Avalia\xe7\xe3o M\xe9dia","Visualiza\xe7\xf5es Totais","Downloads Totais"],data:d.map(e=>[e.course,e.activeStudents,e.avgTime,e.completionRate,e.avgRating,e.totalViews,e.totalDownloads]),metadata:{date:new Date().toLocaleDateString("pt-BR"),user:"Sistema SwiftEDU"}}),u.addPivotTable("An\xe1lise de Dispositivos",r,{rows:["device"],columns:["browser"],values:[{field:"totalAccess",aggregation:"sum"},{field:"totalHours",aggregation:"average"}]}),u.addSummarySheet("Resumo",{title:"Resumo de Estat\xedsticas de Acesso",sections:[{sectionTitle:"M\xe9tricas Gerais",metrics:[{label:"Total de Alunos Ativos",value:(null==v?void 0:v.activeStudents)||0},{label:"M\xe9dia de Acessos por Aluno",value:Math.round(r.reduce((e,t)=>e+t.totalAccess,0)/r.length)},{label:"Tempo M\xe9dio de Estudo por Aluno",value:"".concat((r.reduce((e,t)=>e+t.totalHours,0)/r.length).toFixed(1)," horas")},{label:"Taxa M\xe9dia de Conclus\xe3o",value:"".concat(Math.round(r.reduce((e,t)=>e+t.avgCompletion,0)/r.length),"%")}]},{sectionTitle:"Padr\xf5es de Acesso",metrics:[{label:"Hor\xe1rio de Maior Acesso",value:"19:00-21:00"},{label:"Dia com Mais Acessos",value:"Segunda-feira"},{label:"Total de Acessos na Semana",value:i.reduce((e,t)=>e+t.accesses,0)},{label:"M\xe9dia de Usu\xe1rios no Pico",value:Math.round(i.reduce((e,t)=>e+t.peakUsers,0)/i.length)}]},{sectionTitle:"Engajamento dos Cursos",metrics:[{label:"Curso Mais Acessado",value:"Normas de Seguran\xe7a"},{label:"Maior Taxa de Conclus\xe3o",value:"Normas de Seguran\xe7a (89%)"},{label:"Melhor Avalia\xe7\xe3o",value:"Normas de Seguran\xe7a (4.7)"},{label:"Total de Visualiza\xe7\xf5es",value:d.reduce((e,t)=>e+t.totalViews,0)}]}]}),u.download("relatorio_acesso_alunos_".concat(new Date().toISOString().split("T")[0],".xlsx")),alert("Relat\xf3rio de Estat\xedsticas de Acesso dos Alunos gerado com sucesso!")}catch(e){console.error("Erro ao gerar relat\xf3rio de acesso:",e),alert("Erro ao gerar relat\xf3rio de acesso")}finally{w(null)}},B=[{title:a("reports.gradesHistoryReport"),description:a("reports.gradesHistoryReportDesc"),type:"grades",icon:l.A,color:"text-yellow-400",bgColor:"bg-yellow-500/10"},{title:a("reports.enrollmentReport"),description:"Relat\xf3rio completo de matr\xedculas e conclus\xf5es de cursos",type:"enrollments",icon:r.A,color:"text-blue-400",bgColor:"bg-blue-500/10"},{title:"Estat\xedsticas de Acesso dos Alunos",description:"Acompanhe o acesso dos alunos: frequ\xeancia, tempo de estudo e engajamento",type:"access",icon:n.A,color:"text-green-400",bgColor:"bg-green-500/10"}];return e?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-9 w-48 bg-gold-500/20 rounded-lg animate-pulse mb-2"}),(0,s.jsx)("div",{className:"h-5 w-64 bg-gold-500/10 rounded animate-pulse"})]}),(0,s.jsx)(V,{type:"button",className:"w-48"})]}),(0,s.jsx)("div",{className:"p-6 bg-navy-900/30 border border-gold-500/10 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-gold-500/20 rounded animate-pulse"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)("div",{className:"h-5 w-24 bg-gold-500/10 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-9 w-32 bg-gold-500/20 rounded-lg animate-pulse"}),(0,s.jsx)("div",{className:"h-5 w-8 bg-gold-500/10 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-9 w-32 bg-gold-500/20 rounded-lg animate-pulse"})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:(0,s.jsx)(V,{type:"metric",count:4})}),(0,s.jsxs)("div",{className:"p-6 bg-navy-900/30 border border-gold-500/10 rounded-xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"h-6 w-48 bg-gold-500/20 rounded animate-pulse mb-2"}),(0,s.jsx)("div",{className:"h-4 w-64 bg-gold-500/10 rounded animate-pulse"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,s.jsx)(V,{type:"card",count:3})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(V,{type:"table"}),(0,s.jsx)(V,{type:"table"})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(S.A,{className:"mb-2"}),(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gold flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-8 h-8 text-gold-400"}),a("reports.title")]}),(0,s.jsx)("p",{className:"text-gold-300 mt-1",children:a("reports.subtitle")})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(b.A,{variant:"primary",icon:(0,s.jsx)(d.A,{className:"w-5 h-5"}),onClick:()=>{if(!v)return;let e=new Y.xc,t=[{metric:a("dashboard.totalStudents"),value:v.totalStudents},{metric:a("reports.activeStudents"),value:v.activeStudents},{metric:a("dashboard.instructors"),value:v.totalInstructors},{metric:a("courses.totalCourses"),value:v.totalCourses},{metric:a("reports.totalEnrollments"),value:v.totalEnrollments},{metric:a("reports.coursesCompleted"),value:v.completedCourses},{metric:a("reports.averageCompletion"),value:"".concat(v.averageCompletionRate,"%")}];e.addDataSheet("M\xe9tricas Principais",{title:"Relat\xf3rio SwiftEDU - M\xe9tricas Principais",headers:["M\xe9trica","Valor"],data:t.map(e=>[e.metric,e.value]),metadata:{date:new Date().toLocaleDateString("pt-BR"),period:"".concat(new Date(A.start).toLocaleDateString("pt-BR")," - ").concat(new Date(A.end).toLocaleDateString("pt-BR")),user:"Sistema SwiftEDU"}}),e.addDataSheet("Cursos por Categoria",{title:a("reports.coursesByCategory"),headers:[a("courses.category"),a("reports.quantity"),"Percentual (%)"],data:v.coursesPerCategory.map(e=>[e.category,e.count,"".concat(Math.round(e.count/v.totalCourses*100),"%")]),metadata:{date:new Date().toLocaleDateString("pt-BR"),user:"Sistema SwiftEDU"}}),e.addDataSheet("Top 5 Cursos",{title:a("reports.top5Courses"),headers:["Posi\xe7\xe3o",a("courses.courseTitle"),a("reports.enrollments")],data:v.topCourses.map((e,t)=>["#".concat(t+1),e.title,e.enrollments]),metadata:{date:new Date().toLocaleDateString("pt-BR"),period:"".concat(new Date(A.start).toLocaleDateString("pt-BR")," - ").concat(new Date(A.end).toLocaleDateString("pt-BR")),user:"Sistema SwiftEDU"}}),v.enrollmentsByMonth.length>0&&e.addDataSheet("Matr\xedculas por M\xeas",{title:"Evolu\xe7\xe3o de Matr\xedculas",headers:["M\xeas","Quantidade"],data:v.enrollmentsByMonth.map(e=>[e.month,e.count]),metadata:{date:new Date().toLocaleDateString("pt-BR"),user:"Sistema SwiftEDU"}}),e.addSummarySheet("Resumo",{title:"Resumo Executivo",sections:[{sectionTitle:"Estat\xedsticas de Usu\xe1rios",metrics:[{label:"Total de Alunos",value:v.totalStudents},{label:"Alunos Ativos",value:v.activeStudents},{label:"Total de Instrutores",value:v.totalInstructors}]},{sectionTitle:"Estat\xedsticas de Cursos",metrics:[{label:"Total de Cursos",value:v.totalCourses},{label:"Cursos Conclu\xeddos",value:v.completedCourses},{label:"Taxa M\xe9dia de Conclus\xe3o",value:"".concat(v.averageCompletionRate,"%")}]},{sectionTitle:"Estat\xedsticas de Matr\xedculas",metrics:[{label:"Total de Matr\xedculas",value:v.totalEnrollments},{label:"M\xe9dia de Matr\xedculas por Curso",value:Math.round(v.totalEnrollments/Math.max(v.totalCourses,1))}]}]}),e.download("relatorio_swiftedu_".concat(new Date().toISOString().split("T")[0],".xlsx"))},title:"Exportar para Excel com tabelas din\xe2micas",children:[a("reports.export")," Excel (Din\xe2mico)"]})})]}),(0,s.jsx)(h.Ay,{children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(c.A,{className:"w-5 h-5 text-gold-400"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsxs)("label",{className:"text-gold-300",children:[a("reports.dateRange"),":"]}),(0,s.jsx)("input",{type:"date",value:A.start,onChange:e=>D({...A,start:e.target.value}),className:"px-3 py-1 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500"}),(0,s.jsx)("span",{className:"text-gold-300",children:a("reports.to")}),(0,s.jsx)("input",{type:"date",value:A.end,onChange:e=>D({...A,end:e.target.value}),className:"px-3 py-1 bg-navy-900/50 border border-navy-600 rounded-lg text-gold-100 focus:outline-none focus:ring-2 focus:ring-gold-500"})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(y,{title:a("reports.enrollments"),value:(null==v?void 0:v.totalEnrollments)||0,subtitle:a("reports.inPeriod"),icon:(0,s.jsx)(r.A,{className:"w-full h-full"}),format:"number",color:"blue",animate:!0,trend:v&&v.totalEnrollments>0?{value:12.5,direction:"up",label:"vs m\xeas anterior"}:void 0}),(0,s.jsx)(y,{title:a("reports.completionRate"),value:(null==v?void 0:v.averageCompletionRate)||0,subtitle:a("reports.overallAverage"),icon:(0,s.jsx)(u.A,{className:"w-full h-full"}),format:"percentage",color:"green",animate:!0,trend:v&&v.averageCompletionRate>0?{value:5.2,direction:"up"}:void 0}),(0,s.jsx)(y,{title:a("reports.activeStudents"),value:(null==v?void 0:v.activeStudents)||0,subtitle:a("dashboard.total"),icon:(0,s.jsx)(n.A,{className:"w-full h-full"}),format:"number",color:"purple",animate:!0,trend:v&&v.activeStudents>0?{value:8.3,direction:"up"}:void 0}),(0,s.jsx)(y,{title:a("courses.title"),value:(null==v?void 0:v.totalCourses)||0,subtitle:a("reports.available"),icon:(0,s.jsx)(g.A,{className:"w-full h-full"}),format:"number",color:"gold",animate:!0})]}),(0,s.jsx)(h.Ay,{title:a("reports.availableReports"),subtitle:a("reports.selectReport"),children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:B.map((e,t)=>{let o=e.icon,l=j===e.type;return(0,s.jsxs)("div",{className:"group relative border border-gold-500/20 rounded-xl overflow-hidden hover:border-gold-500/40 transition-all duration-300 hover:shadow-lg hover:shadow-gold-500/10",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-gold-500/5 via-transparent to-navy-800/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,s.jsxs)("div",{className:"relative p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-4 ".concat(e.bgColor," rounded-xl ").concat(e.color," group-hover:scale-110 transition-transform duration-300"),children:(0,s.jsx)(o,{className:"w-8 h-8"})}),l&&(0,s.jsx)(q,{status:"processing",label:"Gerando",size:"xs",pulse:!0})]}),(0,s.jsx)("h4",{className:"font-bold text-lg text-gold-100 mb-2 group-hover:text-gold transition-colors",children:e.title}),(0,s.jsx)("p",{className:"text-gold-400 text-sm leading-relaxed mb-6 min-h-[3rem]",children:e.description}),(0,s.jsx)(b.A,{variant:"primary",size:"sm",className:"w-full group-hover:bg-gold-600 group-hover:shadow-lg transition-all duration-300",onClick:()=>C(e.type),disabled:l,icon:l?void 0:(0,s.jsx)(m.A,{className:"w-4 h-4"}),children:l?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(N.A,{size:"sm",colorClass:"border-white"}),(0,s.jsx)("span",{children:a("reports.generating")})]}):a("reports.generateReport")}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 mt-4 pt-4 border-t border-gold-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gold-500",children:[(0,s.jsx)(p.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Excel"})]}),(0,s.jsx)("span",{className:"text-gold-700",children:"•"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gold-500",children:[(0,s.jsx)(x.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"CSV"})]}),(0,s.jsx)("span",{className:"text-gold-700",children:"•"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gold-500",children:[(0,s.jsx)(d.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Din\xe2mico"})]})]})]})]},t)})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(h.Ay,{title:a("reports.top5Courses"),subtitle:a("reports.byEnrollments"),children:(0,s.jsx)(F,{data:(null==v?void 0:v.topCourses.map((e,t)=>({...e,position:t+1})))||[],columns:[{key:"position",header:"#",width:"60px",align:"center",format:e=>(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsxs)("span",{className:"\n                      px-2 py-1 rounded-lg font-bold text-sm\n                      ".concat(1===e?"bg-yellow-500/20 text-yellow-400":2===e?"bg-gray-300/20 text-gray-300":3===e?"bg-orange-500/20 text-orange-400":"bg-navy-700/50 text-gold-400","\n                    "),children:[e,"\xba"]})})},{key:"title",header:"Curso",format:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"w-4 h-4 text-gold-500/50"}),(0,s.jsx)("span",{className:"font-medium text-gold-100",children:e})]})},{key:"enrollments",header:"Matr\xedculas",align:"right",sortable:!0,format:e=>(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(r.A,{className:"w-4 h-4 text-gold-500/30"}),(0,s.jsx)("span",{className:"text-gold-200 font-semibold",children:e<1e3?e.toString():e<1e6?"".concat((e/1e3).toFixed(1),"K"):e<1e9?"".concat((e/1e6).toFixed(1),"M"):"".concat((e/1e9).toFixed(1),"B")})]})}],showPagination:!1,searchable:!1,showHeader:!1,density:"compact",stickyHeader:!0,maxHeight:"300px",hoverable:!0,borderless:!0,emptyMessage:a("reports.noCoursesInPeriod"),zebra:!1})}),(0,s.jsx)(h.Ay,{title:a("reports.coursesByCategory"),children:(0,s.jsx)(F,{data:(null==v?void 0:v.coursesPerCategory)||[],columns:[{key:"category",header:"Categoria",sortable:!0,format:e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-gold-400"}),(0,s.jsx)("span",{className:"font-medium",children:e})]})},{key:"count",header:"Quantidade",sortable:!0,align:"center",format:e=>(0,s.jsx)("span",{className:"px-3 py-1 bg-gold-500/20 text-gold-200 rounded-full text-sm font-medium",children:e})},{key:"percentage",header:"Percentual",align:"right",format:(e,t)=>{let a=Math.round(t.count/((null==v?void 0:v.totalCourses)||1)*100);return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsxs)("span",{className:"text-gold-300 font-medium",children:[a,"%"]}),(0,s.jsx)("div",{className:"w-24 bg-navy-900/50 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-gold-500 to-gold-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(a,"%")}})})]})}}],showPagination:!1,searchable:!1,showHeader:!1,density:"compact",stickyHeader:!0,maxHeight:"300px",hoverable:!0,borderless:!0,emptyMessage:a("reports.noCategoriesFound")})})]})]})}},35494:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var s=a(95155),o=a(12115),l=a(6874),r=a.n(l),n=a(35695),i=a(13052),d=a(57340),c=a(38274);function u(e){let{items:t,separator:a=(0,s.jsx)(i.A,{className:"w-4 h-4 text-gold-600"}),showHome:l=!0,maxItems:u=5,className:g=""}=e,m=(0,n.usePathname)(),p=t||(()=>{let e=m.split("/").filter(Boolean),t=[];l&&t.push({label:"In\xedcio",href:"dashboard"===e[0]?"/dashboard":"/student-dashboard",icon:(0,s.jsx)(d.A,{className:"w-4 h-4"})});let a="";return e.forEach((s,o)=>{if(a+="/".concat(s),l&&0===o&&("dashboard"===s||"student-dashboard"===s))return;let r=s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");t.push({label:r,href:o===e.length-1?void 0:a})}),t})(),x=p.length<=u?p:[p[0],{label:"...",href:void 0},...p.slice(-(u-2))];return(0,s.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 ".concat(g),children:x.map((e,t)=>(0,s.jsxs)(o.Fragment,{children:[t>0&&(0,s.jsx)("span",{className:"text-gold-600",children:a}),(0,s.jsx)(c.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center",children:e.href?(0,s.jsxs)(r(),{href:e.href,className:"flex items-center gap-1.5 text-sm font-medium text-gold-400 hover:text-gold-200 transition-colors",children:[e.icon,(0,s.jsx)("span",{children:e.label})]}):(0,s.jsxs)("span",{className:"flex items-center gap-1.5 text-sm font-medium text-gold-100","aria-current":"page",children:[e.icon,(0,s.jsx)("span",{children:e.label})]})})]},t))})}},80858:(e,t,a)=>{Promise.resolve().then(a.bind(a,19989))}},e=>{e.O(0,[3524,3254,9051,7244,5232,1338,9760,473,8441,5964,7358],()=>e(e.s=80858)),_N_E=e.O()}]);