(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{337:(e,a,t)=>{Promise.resolve().then(t.bind(t,90221))},17580:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},21380:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},28833:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},69037:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},72713:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},90221:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var s=t(95155),r=t(12115),l=t(6874),o=t.n(l),i=t(35695),n=t(65589),d=t(73783),c=t(17580),h=t(5040),u=t(69037),x=t(21380),m=t(94498),p=t(87949),g=t(28833),y=t(81191),f=t(72713),v=t(381),b=t(42355),j=t(13052),w=t(92657),N=t(34835),k=t(55870),A=t(46414),M=t(30461),P=t(79884),S=t(38274),E=t(60760);function O(e){let{children:a}=e,[t,l]=(0,r.useState)(!0),[O,z]=(0,r.useState)(null),[L,_]=(0,r.useState)(!1),[C,I]=(0,r.useState)(0),q=(0,i.usePathname)();(0,i.useRouter)();let T=(0,A.U)(),{t:V}=(0,M.B)();(0,r.useEffect)(()=>{let e=localStorage.getItem("sidebarOpen");null!==e&&l(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]),(0,r.useEffect)(()=>{(async()=>{let{count:e}=await T.from("certificate_requests").select("*",{count:"exact",head:!0}).eq("status","pending");I(e||0)})()},[]);let H=[{name:V("nav.dashboard"),href:"/dashboard",icon:d.A},{name:V("nav.users"),href:"/dashboard/users",icon:c.A},{name:V("nav.courses"),href:"/dashboard/courses",icon:h.A},{name:"Certificados",href:"/dashboard/certificates",icon:u.A},{name:"M\xf3dulos",href:"/dashboard/modules",icon:x.A},{name:"Estrutura",href:"/dashboard/structure",icon:m.A},{name:V("nav.subjects"),href:"/dashboard/subjects",icon:p.A},{name:V("nav.lessons"),href:"/dashboard/lessons",icon:g.A},{name:"Testes",href:"/dashboard/tests",icon:y.A},{name:V("nav.reports"),href:"/dashboard/reports",icon:f.A},{name:V("nav.settings"),href:"/dashboard/settings",icon:v.A}],J=async()=>{try{_(!0);{let e=["sb-","supabase","auth-token"],a=[];for(let t=localStorage.length-1;t>=0;t--){let s=localStorage.key(t);s&&e.some(e=>s.includes(e))&&a.push(s)}a.forEach(e=>{console.log("Removing auth key:",e),localStorage.removeItem(e)});for(let a=sessionStorage.length-1;a>=0;a--){let t=sessionStorage.key(a);t&&e.some(e=>t.includes(e))&&sessionStorage.removeItem(t)}}let e=await fetch("/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),a=await e.json();if(!e.ok)throw console.error("Logout API error:",a),Error(a.error||"Logout failed");await new Promise(e=>setTimeout(e,200)),window.location.href="/"}catch(e){console.error("Error logging out:",e),setTimeout(()=>{window.location.href="/"},1e3),_(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-pattern",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-navy-600/50 via-navy-700/50 to-navy-900/50"}),(0,s.jsxs)("div",{className:"relative flex h-screen",children:[(0,s.jsx)(S.P.aside,{initial:{width:t?256:80},animate:{width:t?256:80},transition:{duration:.3,ease:"easeInOut"},className:"relative bg-navy-900/95 backdrop-blur-md border-r border-gold-500/20 flex-shrink-0",children:(0,s.jsxs)("div",{className:"flex flex-col h-full p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,s.jsx)(k.A,{width:t?120:60,height:t?120:60})}),(0,s.jsx)("button",{onClick:()=>l(!t),className:"absolute -right-5 top-12 w-11 h-11 bg-navy-800/95 backdrop-blur-sm border-2 border-gold-500 rounded-full flex items-center justify-center text-gold-400 hover:text-gold-200 hover:bg-navy-700 hover:scale-110 hover:shadow-lg hover:shadow-gold-500/30 transition-all z-50 group","aria-label":t?"Fechar menu lateral":"Abrir menu lateral",children:t?(0,s.jsx)(b.A,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}):(0,s.jsx)(j.A,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})}),(0,s.jsx)("nav",{className:"flex-1 space-y-2",children:H.map((e,a)=>{var r;let l=e.icon,i="/dashboard"===(r=e.href)?q===r:q.startsWith(r);return(0,s.jsxs)(S.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*a},className:"relative",onMouseEnter:()=>z(e.href),onMouseLeave:()=>z(null),children:[(0,s.jsxs)(o(),{href:e.href,className:"\n                        flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all group relative\n                        ".concat(i?"bg-gold-500/20 text-gold shadow-lg shadow-gold-500/10":"text-gold-300 hover:bg-navy-800/50 hover:text-gold-200","\n                      "),children:[(0,s.jsx)(l,{className:"w-5 h-5 flex-shrink-0 ".concat(i&&"animate-pulse")}),(0,s.jsx)(E.N,{children:t&&(0,s.jsx)(S.P.span,{className:"font-medium whitespace-nowrap flex-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:e.name})}),"/dashboard/certificates"===e.href&&C>0&&(0,s.jsx)(S.P.div,{initial:{scale:0},animate:{scale:1},className:"".concat(t?"relative":"absolute top-1 right-1"," bg-red-500 text-white text-xs font-bold rounded-full min-w-[20px] h-5 flex items-center justify-center px-1"),children:C})]}),(0,s.jsx)(E.N,{children:!t&&O===e.href&&(0,s.jsx)(S.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 z-50",children:(0,s.jsx)("div",{className:"px-3 py-2 bg-navy-800 border border-gold-500/30 rounded-lg shadow-xl whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gold-200",children:e.name})})})})]},e.href)})}),(0,s.jsx)("div",{className:"border-t border-gold-500/20 pt-4 mb-4",children:(0,s.jsxs)(S.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"relative",onMouseEnter:()=>z("/student-dashboard"),onMouseLeave:()=>z(null),children:[(0,s.jsxs)(o(),{href:"/student-dashboard",className:"\n                    flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all group relative\n                    text-blue-400 hover:bg-blue-500/20 hover:text-blue-300\n                  ",children:[(0,s.jsx)(w.A,{className:"w-5 h-5 flex-shrink-0"}),(0,s.jsx)(E.N,{children:t&&(0,s.jsx)(S.P.span,{className:"font-medium whitespace-nowrap flex-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:"Portal do Aluno"})})]}),(0,s.jsx)(E.N,{children:!t&&"/student-dashboard"===O&&(0,s.jsx)(S.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 z-50",children:(0,s.jsx)("div",{className:"px-3 py-2 bg-navy-800 border border-gold-500/30 rounded-lg shadow-xl whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gold-200",children:"Portal do Aluno"})})})})]})}),(0,s.jsx)("div",{className:"border-t border-gold-500/20 pt-4",children:(0,s.jsxs)("div",{className:"relative",onMouseEnter:()=>z("logout"),onMouseLeave:()=>z(null),children:[(0,s.jsxs)("button",{onClick:J,disabled:L,className:"\n                    flex items-center gap-3 px-3 py-2.5 w-full rounded-lg\n                    text-gold-300 hover:bg-red-500/20 hover:text-red-400 transition-all\n                    disabled:opacity-50 disabled:cursor-not-allowed\n                  ",children:[(0,s.jsx)(N.A,{className:"w-5 h-5 flex-shrink-0"}),(0,s.jsx)(E.N,{children:t&&(0,s.jsx)(S.P.span,{className:"font-medium whitespace-nowrap",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},transition:{duration:.2},children:V(L?"nav.loggingOut":"nav.logout")})})]}),(0,s.jsx)(E.N,{children:!t&&"logout"===O&&(0,s.jsx)(S.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"absolute left-full ml-2 top-1/2 -translate-y-1/2 z-50",children:(0,s.jsx)("div",{className:"px-3 py-2 bg-navy-800 border border-gold-500/30 rounded-lg shadow-xl whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm text-gold-200",children:V(L?"nav.loggingOut":"nav.logout")})})})})]})})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)(n.A,{children:(0,s.jsx)(P.Ay,{children:(0,s.jsx)("div",{className:"p-8",children:a})})})})]})]})}},92657:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94498:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])}},e=>{e.O(0,[3254,9051,7244,6766,9350,1338,647,8441,5964,7358],()=>e(e.s=337)),_N_E=e.O()}]);